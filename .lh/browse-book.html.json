{
    "sourceFile": "browse-book.html",
    "activeCommit": 1,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [],
            "date": 1756712948663,
            "name": "Commit-0",
            "content": "<html lang=\"en\">\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>Document</title>\r\n</head>\r\n<body>\r\n    \r\n</body>\r\n</html>"
        },
        {
            "activePatchIndex": 78,
            "patches": [
                {
                    "date": 1756819539312,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1756819662660,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -379,8 +379,16 @@\n \r\n                     data.forEach(book => {\r\n                         const li = document.createElement(\"li\");\r\n \r\n+                         fetch(\"all-books.json\")\r\n+                .then(response => response.json())\r\n+                .then(data => {\r\n+                    const booksList = document.getElementById(\"booksList\");\r\n+\r\n+                    data.forEach(book => {\r\n+                        const li = document.createElement(\"li\");\r\n+\r\n                         li.innerHTML = `\r\n     <div class=\"img-book\" style=\"background-image: url('${book.image}');\">\r\n         <button class='view-btn' onclick=\"viewBook(this)\">View Quick</button>\r\n     </div>\r\n"
                },
                {
                    "date": 1756819670870,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -371,24 +371,16 @@\n                 if (e.target === this) this.style.display = \"none\";\r\n             }\r\n \r\n             // Fetch books from JSON\r\n-            fetch(\"all-books.json\")\r\n+              fetch(\"all-books.json\")\r\n                 .then(response => response.json())\r\n                 .then(data => {\r\n                     const booksList = document.getElementById(\"booksList\");\r\n \r\n                     data.forEach(book => {\r\n                         const li = document.createElement(\"li\");\r\n \r\n-                         fetch(\"all-books.json\")\r\n-                .then(response => response.json())\r\n-                .then(data => {\r\n-                    const booksList = document.getElementById(\"booksList\");\r\n-\r\n-                    data.forEach(book => {\r\n-                        const li = document.createElement(\"li\");\r\n-\r\n                         li.innerHTML = `\r\n     <div class=\"img-book\" style=\"background-image: url('${book.image}');\">\r\n         <button class='view-btn' onclick=\"viewBook(this)\">View Quick</button>\r\n     </div>\r\n"
                },
                {
                    "date": 1756819679541,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -371,9 +371,9 @@\n                 if (e.target === this) this.style.display = \"none\";\r\n             }\r\n \r\n             // Fetch books from JSON\r\n-              fetch(\"all-books.json\")\r\n+            fetch(\"all-books.json\")\r\n                 .then(response => response.json())\r\n                 .then(data => {\r\n                     const booksList = document.getElementById(\"booksList\");\r\n \r\n"
                },
                {
                    "date": 1756819752768,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -317,9 +317,9 @@\n                     notification.classList.remove(\"show\");\r\n                 }, 2000);\r\n             }\r\n \r\n-            function renderCart() {\r\n+                  function renderCart() {\r\n                 const cartItemsContainer = document.querySelector(\".cart-items\");\r\n                 if (!cartItemsContainer) {\r\n                     // create cart-items div if not exist\r\n                     const div = document.createElement(\"div\");\r\n"
                },
                {
                    "date": 1756819847194,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -317,43 +317,54 @@\n                     notification.classList.remove(\"show\");\r\n                 }, 2000);\r\n             }\r\n \r\n-                  function renderCart() {\r\n-                const cartItemsContainer = document.querySelector(\".cart-items\");\r\n-                if (!cartItemsContainer) {\r\n-                    // create cart-items div if not exist\r\n-                    const div = document.createElement(\"div\");\r\n-                    div.className = \"cart-items\";\r\n-                    document.getElementById(\"cartSidebar\").insertBefore(div, document.querySelector(\".cart-footer\"));\r\n-                }\r\n+   async function renderCart() {\r\n+    const cartItemsContainer = document.querySelector(\".cart-items\");\r\n+    if (!cartItemsContainer) {\r\n+        const div = document.createElement(\"div\");\r\n+        div.className = \"cart-items\";\r\n+        document.getElementById(\"cartSidebar\").insertBefore(div, document.querySelector(\".cart-footer\"));\r\n+    }\r\n \r\n-                const cart = JSON.parse(localStorage.getItem(\"bookCart\")) || [];\r\n-                const cartContainer = document.querySelector(\".cart-items\");\r\n-                cartContainer.innerHTML = \"\";\r\n+    const cart = JSON.parse(localStorage.getItem(\"bookCart\")) || [];\r\n+    const cartContainer = document.querySelector(\".cart-items\");\r\n+    cartContainer.innerHTML = \"\";\r\n \r\n-                let total = 0;\r\n+    let total = 0;\r\n \r\n-                cart.forEach((item, index) => {\r\n-                    total += item.price;\r\n+    try {\r\n+        const response = await fetch(\"all-books.json\");\r\n+        const booksData = await response.json();\r\n \r\n-                    const cartItem = document.createElement(\"div\");\r\n-                    cartItem.className = \"cart-item\";\r\n-                    cartItem.innerHTML = `\r\n-            <img src=\"${item.image}\" alt=\"Book\">\r\n-            <div class=\"cart-item-info\">\r\n-                <h4>${item.title}</h4>\r\n-                <p>$${item.price.toFixed(2)}</p>\r\n-                <button class=\"remove-btn\" onclick=\"removeFromCart(${index})\">Remove</button>\r\n-            </div>\r\n-        `;\r\n-                    cartContainer.appendChild(cartItem);\r\n-                });\r\n+        cart.forEach((item, index) => {\r\n+            total += item.price;\r\n \r\n-                // Update total\r\n-                document.querySelector(\".cart-total span:last-child\").innerText = `$${total.toFixed(2)}`;\r\n-            }\r\n+            // Find the book in JSON to get the correct image\r\n+            const bookData = booksData.find(b => b.title === item.title);\r\n+            const image = bookData ? bookData.image : \"img/books/placeholder.jpg\";\r\n \r\n+            const cartItem = document.createElement(\"div\");\r\n+            cartItem.className = \"cart-item\";\r\n+            cartItem.innerHTML = `\r\n+                <img src=\"${image}\" alt=\"Book\">\r\n+                <div class=\"cart-item-info\">\r\n+                    <h4>${item.title}</h4>\r\n+                    <p>$${item.price.toFixed(2)}</p>\r\n+                    <button class=\"remove-btn\" onclick=\"removeFromCart(${index})\">Remove</button>\r\n+                </div>\r\n+            `;\r\n+            cartContainer.appendChild(cartItem);\r\n+        });\r\n+\r\n+        // Update total\r\n+        document.querySelector(\".cart-total span:last-child\").innerText = `$${total.toFixed(2)}`;\r\n+\r\n+    } catch (err) {\r\n+        console.error(\"Error fetching all-books.json:\", err);\r\n+    }\r\n+}\r\n+\r\n             // Remove item from cart\r\n             function removeFromCart(index) {\r\n                 let cart = JSON.parse(localStorage.getItem(\"bookCart\")) || [];\r\n                 cart.splice(index, 1);\r\n"
                },
                {
                    "date": 1756820118179,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -317,9 +317,9 @@\n                     notification.classList.remove(\"show\");\r\n                 }, 2000);\r\n             }\r\n \r\n-   async function renderCart() {\r\n+async function renderCart() {\r\n     const cartItemsContainer = document.querySelector(\".cart-items\");\r\n     if (!cartItemsContainer) {\r\n         const div = document.createElement(\"div\");\r\n         div.className = \"cart-items\";\r\n@@ -340,10 +340,18 @@\n             total += item.price;\r\n \r\n             // Find the book in JSON to get the correct image\r\n             const bookData = booksData.find(b => b.title === item.title);\r\n+            if (!bookData) {\r\n+                console.warn(`Book not found in JSON: \"${item.title}\"`);\r\n+            } else if (!bookData.image) {\r\n+                console.warn(`Book image missing in JSON for: \"${item.title}\"`);\r\n+            }\r\n+\r\n             const image = bookData ? bookData.image : \"img/books/placeholder.jpg\";\r\n \r\n+            console.log(`Cart item: ${item.title}, Image used: ${image}`);\r\n+\r\n             const cartItem = document.createElement(\"div\");\r\n             cartItem.className = \"cart-item\";\r\n             cartItem.innerHTML = `\r\n                 <img src=\"${image}\" alt=\"Book\">\r\n"
                },
                {
                    "date": 1756820375735,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -317,61 +317,61 @@\n                     notification.classList.remove(\"show\");\r\n                 }, 2000);\r\n             }\r\n \r\n-async function renderCart() {\r\n-    const cartItemsContainer = document.querySelector(\".cart-items\");\r\n-    if (!cartItemsContainer) {\r\n-        const div = document.createElement(\"div\");\r\n-        div.className = \"cart-items\";\r\n-        document.getElementById(\"cartSidebar\").insertBefore(div, document.querySelector(\".cart-footer\"));\r\n-    }\r\n+            async function renderCart() {\r\n+                const cartItemsContainer = document.querySelector(\".cart-items\");\r\n+                if (!cartItemsContainer) {\r\n+                    const div = document.createElement(\"div\");\r\n+                    div.className = \"cart-items\";\r\n+                    document.getElementById(\"cartSidebar\").insertBefore(div, document.querySelector(\".cart-footer\"));\r\n+                }\r\n \r\n-    const cart = JSON.parse(localStorage.getItem(\"bookCart\")) || [];\r\n-    const cartContainer = document.querySelector(\".cart-items\");\r\n-    cartContainer.innerHTML = \"\";\r\n+                const cart = JSON.parse(localStorage.getItem(\"bookCart\")) || [];\r\n+                const cartContainer = document.querySelector(\".cart-items\");\r\n+                cartContainer.innerHTML = \"\";\r\n \r\n-    let total = 0;\r\n+                let total = 0;\r\n \r\n-    try {\r\n-        const response = await fetch(\"all-books.json\");\r\n-        const booksData = await response.json();\r\n+                try {\r\n+                    const response = await fetch(\"all-books.json\");\r\n+                    const booksData = await response.json();\r\n \r\n-        cart.forEach((item, index) => {\r\n-            total += item.price;\r\n+                    cart.forEach((item, index) => {\r\n+                        total += item.price;\r\n \r\n-            // Find the book in JSON to get the correct image\r\n-            const bookData = booksData.find(b => b.title === item.title);\r\n-            if (!bookData) {\r\n-                console.warn(`Book not found in JSON: \"${item.title}\"`);\r\n-            } else if (!bookData.image) {\r\n-                console.warn(`Book image missing in JSON for: \"${item.title}\"`);\r\n-            }\r\n+                        // Find the book in JSON to get the correct image\r\n+                        const bookData = booksData.find(b => b.title === item.title);\r\n+                        if (!bookData) {\r\n+                            console.warn(`Book not found in JSON: \"${item.title}\"`);\r\n+                        } else if (!bookData.image) {\r\n+                            console.warn(`Book image missing in JSON for: \"${item.title}\"`);\r\n+                        }\r\n \r\n-            const image = bookData ? bookData.image : \"img/books/placeholder.jpg\";\r\n+                        const image =  bookData.image : \"img/books/placeholder.jpg\";\r\n \r\n-            console.log(`Cart item: ${item.title}, Image used: ${image}`);\r\n+                        console.log(`Cart item: ${item.title}, Image used: ${image}`);\r\n \r\n-            const cartItem = document.createElement(\"div\");\r\n-            cartItem.className = \"cart-item\";\r\n-            cartItem.innerHTML = `\r\n+                        const cartItem = document.createElement(\"div\");\r\n+                        cartItem.className = \"cart-item\";\r\n+                        cartItem.innerHTML = `\r\n                 <img src=\"${image}\" alt=\"Book\">\r\n                 <div class=\"cart-item-info\">\r\n                     <h4>${item.title}</h4>\r\n                     <p>$${item.price.toFixed(2)}</p>\r\n                     <button class=\"remove-btn\" onclick=\"removeFromCart(${index})\">Remove</button>\r\n                 </div>\r\n             `;\r\n-            cartContainer.appendChild(cartItem);\r\n-        });\r\n+                        cartContainer.appendChild(cartItem);\r\n+                    });\r\n \r\n-        // Update total\r\n-        document.querySelector(\".cart-total span:last-child\").innerText = `$${total.toFixed(2)}`;\r\n+                    // Update total\r\n+                    document.querySelector(\".cart-total span:last-child\").innerText = `$${total.toFixed(2)}`;\r\n \r\n-    } catch (err) {\r\n-        console.error(\"Error fetching all-books.json:\", err);\r\n-    }\r\n-}\r\n+                } catch (err) {\r\n+                    console.error(\"Error fetching all-books.json:\", err);\r\n+                }\r\n+            }\r\n \r\n             // Remove item from cart\r\n             function removeFromCart(index) {\r\n                 let cart = JSON.parse(localStorage.getItem(\"bookCart\")) || [];\r\n"
                },
                {
                    "date": 1756820382961,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -346,9 +346,9 @@\n                         } else if (!bookData.image) {\r\n                             console.warn(`Book image missing in JSON for: \"${item.title}\"`);\r\n                         }\r\n \r\n-                        const image =  bookData.image : \"img/books/placeholder.jpg\";\r\n+                        const image = bookData ? bookData.image : \"img/books/placeholder.jpg\";\r\n \r\n                         console.log(`Cart item: ${item.title}, Image used: ${image}`);\r\n \r\n                         const cartItem = document.createElement(\"div\");\r\n"
                },
                {
                    "date": 1756820391217,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -346,9 +346,9 @@\n                         } else if (!bookData.image) {\r\n                             console.warn(`Book image missing in JSON for: \"${item.title}\"`);\r\n                         }\r\n \r\n-                        const image = bookData ? bookData.image : \"img/books/placeholder.jpg\";\r\n+                        const image = bookData.image : ;\r\n \r\n                         console.log(`Cart item: ${item.title}, Image used: ${image}`);\r\n \r\n                         const cartItem = document.createElement(\"div\");\r\n"
                },
                {
                    "date": 1756820417306,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -346,9 +346,9 @@\n                         } else if (!bookData.image) {\r\n                             console.warn(`Book image missing in JSON for: \"${item.title}\"`);\r\n                         }\r\n \r\n-                        const image = bookData.image : ;\r\n+                        const image = bookData ? bookData.image : \"img/books/placeholder.jpg\";\r\n \r\n                         console.log(`Cart item: ${item.title}, Image used: ${image}`);\r\n \r\n                         const cartItem = document.createElement(\"div\");\r\n"
                },
                {
                    "date": 1756820430023,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -346,9 +346,9 @@\n                         } else if (!bookData.image) {\r\n                             console.warn(`Book image missing in JSON for: \"${item.title}\"`);\r\n                         }\r\n \r\n-                        const image = bookData ? bookData.image : \"img/books/placeholder.jpg\";\r\n+                        const image = bookData ? bookData.image;\r\n \r\n                         console.log(`Cart item: ${item.title}, Image used: ${image}`);\r\n \r\n                         const cartItem = document.createElement(\"div\");\r\n"
                },
                {
                    "date": 1756820442239,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -346,9 +346,9 @@\n                         } else if (!bookData.image) {\r\n                             console.warn(`Book image missing in JSON for: \"${item.title}\"`);\r\n                         }\r\n \r\n-                        const image = bookData ? bookData.image;\r\n+                        const image = bookData;\r\n \r\n                         console.log(`Cart item: ${item.title}, Image used: ${image}`);\r\n \r\n                         const cartItem = document.createElement(\"div\");\r\n"
                },
                {
                    "date": 1756820487987,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -317,62 +317,63 @@\n                     notification.classList.remove(\"show\");\r\n                 }, 2000);\r\n             }\r\n \r\n-            async function renderCart() {\r\n-                const cartItemsContainer = document.querySelector(\".cart-items\");\r\n-                if (!cartItemsContainer) {\r\n-                    const div = document.createElement(\"div\");\r\n-                    div.className = \"cart-items\";\r\n-                    document.getElementById(\"cartSidebar\").insertBefore(div, document.querySelector(\".cart-footer\"));\r\n-                }\r\n+   async function renderCart() {\r\n+    const cartItemsContainer = document.querySelector(\".cart-items\");\r\n+    if (!cartItemsContainer) {\r\n+        const div = document.createElement(\"div\");\r\n+        div.className = \"cart-items\";\r\n+        document.getElementById(\"cartSidebar\").insertBefore(div, document.querySelector(\".cart-footer\"));\r\n+    }\r\n \r\n-                const cart = JSON.parse(localStorage.getItem(\"bookCart\")) || [];\r\n-                const cartContainer = document.querySelector(\".cart-items\");\r\n-                cartContainer.innerHTML = \"\";\r\n+    const cart = JSON.parse(localStorage.getItem(\"bookCart\")) || [];\r\n+    const cartContainer = document.querySelector(\".cart-items\");\r\n+    cartContainer.innerHTML = \"\";\r\n \r\n-                let total = 0;\r\n+    let total = 0;\r\n \r\n-                try {\r\n-                    const response = await fetch(\"all-books.json\");\r\n-                    const booksData = await response.json();\r\n+    try {\r\n+        const response = await fetch(\"all-books.json\");\r\n+        const booksData = await response.json();\r\n \r\n-                    cart.forEach((item, index) => {\r\n-                        total += item.price;\r\n+        cart.forEach((item, index) => {\r\n+            total += item.price;\r\n \r\n-                        // Find the book in JSON to get the correct image\r\n-                        const bookData = booksData.find(b => b.title === item.title);\r\n-                        if (!bookData) {\r\n-                            console.warn(`Book not found in JSON: \"${item.title}\"`);\r\n-                        } else if (!bookData.image) {\r\n-                            console.warn(`Book image missing in JSON for: \"${item.title}\"`);\r\n-                        }\r\n+            // Find the book in JSON to get the correct image\r\n+            const bookData = booksData.find(b => b.title === item.title);\r\n \r\n-                        const image = bookData;\r\n+            if (!bookData) {\r\n+                console.warn(`Book not found in JSON: \"${item.title}\"`);\r\n+                return; // skip this cart item if not found\r\n+            }\r\n \r\n-                        console.log(`Cart item: ${item.title}, Image used: ${image}`);\r\n+            const image = bookData.image; // get image from JSON\r\n \r\n-                        const cartItem = document.createElement(\"div\");\r\n-                        cartItem.className = \"cart-item\";\r\n-                        cartItem.innerHTML = `\r\n+            console.log(`Cart item: ${item.title}, Image used: ${image}`);\r\n+\r\n+            const cartItem = document.createElement(\"div\");\r\n+            cartItem.className = \"cart-item\";\r\n+            cartItem.innerHTML = `\r\n                 <img src=\"${image}\" alt=\"Book\">\r\n                 <div class=\"cart-item-info\">\r\n                     <h4>${item.title}</h4>\r\n                     <p>$${item.price.toFixed(2)}</p>\r\n                     <button class=\"remove-btn\" onclick=\"removeFromCart(${index})\">Remove</button>\r\n                 </div>\r\n             `;\r\n-                        cartContainer.appendChild(cartItem);\r\n-                    });\r\n+            cartContainer.appendChild(cartItem);\r\n+        });\r\n \r\n-                    // Update total\r\n-                    document.querySelector(\".cart-total span:last-child\").innerText = `$${total.toFixed(2)}`;\r\n+        // Update total\r\n+        document.querySelector(\".cart-total span:last-child\").innerText = `$${total.toFixed(2)}`;\r\n \r\n-                } catch (err) {\r\n-                    console.error(\"Error fetching all-books.json:\", err);\r\n-                }\r\n-            }\r\n+    } catch (err) {\r\n+        console.error(\"Error fetching all-books.json:\", err);\r\n+    }\r\n+}\r\n \r\n+\r\n             // Remove item from cart\r\n             function removeFromCart(index) {\r\n                 let cart = JSON.parse(localStorage.getItem(\"bookCart\")) || [];\r\n                 cart.splice(index, 1);\r\n"
                },
                {
                    "date": 1756820756287,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -41,9 +41,9 @@\n             <img src=\"img/b-hr-1.svg\" alt=\"\" style=\"width: 100%;\">\r\n         </div>\r\n \r\n \r\n-        <div class=\"categories\">\r\n+        <div class=\"categories\" >\r\n             <div class=\"c-head\">\r\n                 <h1>Programming Languages by Herbert Schildt</h1>\r\n             </div>\r\n             <ul>\r\n@@ -317,61 +317,61 @@\n                     notification.classList.remove(\"show\");\r\n                 }, 2000);\r\n             }\r\n \r\n-   async function renderCart() {\r\n-    const cartItemsContainer = document.querySelector(\".cart-items\");\r\n-    if (!cartItemsContainer) {\r\n-        const div = document.createElement(\"div\");\r\n-        div.className = \"cart-items\";\r\n-        document.getElementById(\"cartSidebar\").insertBefore(div, document.querySelector(\".cart-footer\"));\r\n-    }\r\n+            async function renderCart() {\r\n+                const cartItemsContainer = document.querySelector(\".cart-items\");\r\n+                if (!cartItemsContainer) {\r\n+                    const div = document.createElement(\"div\");\r\n+                    div.className = \"cart-items\";\r\n+                    document.getElementById(\"cartSidebar\").insertBefore(div, document.querySelector(\".cart-footer\"));\r\n+                }\r\n \r\n-    const cart = JSON.parse(localStorage.getItem(\"bookCart\")) || [];\r\n-    const cartContainer = document.querySelector(\".cart-items\");\r\n-    cartContainer.innerHTML = \"\";\r\n+                const cart = JSON.parse(localStorage.getItem(\"bookCart\")) || [];\r\n+                const cartContainer = document.querySelector(\".cart-items\");\r\n+                cartContainer.innerHTML = \"\";\r\n \r\n-    let total = 0;\r\n+                let total = 0;\r\n \r\n-    try {\r\n-        const response = await fetch(\"all-books.json\");\r\n-        const booksData = await response.json();\r\n+                try {\r\n+                    const response = await fetch(\"all-books.json\");\r\n+                    const booksData = await response.json();\r\n \r\n-        cart.forEach((item, index) => {\r\n-            total += item.price;\r\n+                    cart.forEach((item, index) => {\r\n+                        total += item.price;\r\n \r\n-            // Find the book in JSON to get the correct image\r\n-            const bookData = booksData.find(b => b.title === item.title);\r\n+                        // Find the book in JSON to get the correct image\r\n+                        const bookData = booksData.find(b => b.title === item.title);\r\n \r\n-            if (!bookData) {\r\n-                console.warn(`Book not found in JSON: \"${item.title}\"`);\r\n-                return; // skip this cart item if not found\r\n-            }\r\n+                        if (!bookData) {\r\n+                            console.warn(`Book not found in JSON: \"${item.title}\"`);\r\n+                            return; // skip this cart item if not found\r\n+                        }\r\n \r\n-            const image = bookData.image; // get image from JSON\r\n+                        const image = bookData.image; // get image from JSON\r\n \r\n-            console.log(`Cart item: ${item.title}, Image used: ${image}`);\r\n+                        console.log(`Cart item: ${item.title}, Image used: ${image}`);\r\n \r\n-            const cartItem = document.createElement(\"div\");\r\n-            cartItem.className = \"cart-item\";\r\n-            cartItem.innerHTML = `\r\n+                        const cartItem = document.createElement(\"div\");\r\n+                        cartItem.className = \"cart-item\";\r\n+                        cartItem.innerHTML = `\r\n                 <img src=\"${image}\" alt=\"Book\">\r\n                 <div class=\"cart-item-info\">\r\n                     <h4>${item.title}</h4>\r\n                     <p>$${item.price.toFixed(2)}</p>\r\n                     <button class=\"remove-btn\" onclick=\"removeFromCart(${index})\">Remove</button>\r\n                 </div>\r\n             `;\r\n-            cartContainer.appendChild(cartItem);\r\n-        });\r\n+                        cartContainer.appendChild(cartItem);\r\n+                    });\r\n \r\n-        // Update total\r\n-        document.querySelector(\".cart-total span:last-child\").innerText = `$${total.toFixed(2)}`;\r\n+                    // Update total\r\n+                    document.querySelector(\".cart-total span:last-child\").innerText = `$${total.toFixed(2)}`;\r\n \r\n-    } catch (err) {\r\n-        console.error(\"Error fetching all-books.json:\", err);\r\n-    }\r\n-}\r\n+                } catch (err) {\r\n+                    console.error(\"Error fetching all-books.json:\", err);\r\n+                }\r\n+            }\r\n \r\n \r\n             // Remove item from cart\r\n             function removeFromCart(index) {\r\n"
                },
                {
                    "date": 1756820763302,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -41,9 +41,9 @@\n             <img src=\"img/b-hr-1.svg\" alt=\"\" style=\"width: 100%;\">\r\n         </div>\r\n \r\n \r\n-        <div class=\"categories\" >\r\n+        <div class=\"categories\" id=\"categories\">\r\n             <div class=\"c-head\">\r\n                 <h1>Programming Languages by Herbert Schildt</h1>\r\n             </div>\r\n             <ul>\r\n"
                },
                {
                    "date": 1756822019547,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -202,8 +202,11 @@\n             </div>\r\n         </div>\r\n \r\n         <script>\r\n+            // Clear old cart\r\n+localStorage.removeItem('bookCart');\r\n+\r\n             const categoryMap = {\r\n                 \"c programming\": \"c\",\r\n                 \"c++\": \"cpp\",\r\n                 \"java\": \"java\"\r\n"
                },
                {
                    "date": 1756822031324,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -203,9 +203,9 @@\n         </div>\r\n \r\n         <script>\r\n             // Clear old cart\r\n-localStorage.removeItem('bookCart');\r\n+            // localStorage.removeItem('bookCart');\r\n \r\n             const categoryMap = {\r\n                 \"c programming\": \"c\",\r\n                 \"c++\": \"cpp\",\r\n"
                },
                {
                    "date": 1756826340278,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -20,9 +20,13 @@\n                 <ul>\r\n                     <li><a href=\"index.html\">Home</a></li>\r\n                     <li><a href=\"\">About</a></li>\r\n                     <li onclick=\"toggleCart()\"><img src=\"img/cart.svg\" alt=\"\" style=\"height: 44px;\"></li>\r\n-                    <li><a href=\"pages/login.html\"><img src=\"img/user-logo.svg\" alt=\"\" style=\"height: 44px;\"></a></li>\r\n+                    <li><a href=\"pages/login.html\"><img src=\"img/user-logo.svg\" alt=\"\" style=\"height: 44px;\"></a>\r\n+                    <div class=\"login-container\">\r\n+  <div class=\"login-username\">Vincent James Manalastas</div>\r\n+  <button class=\"login-button\">Log Out</button>\r\n+</div></li>\r\n                 </ul>\r\n             </div>\r\n         </div>\r\n \r\n"
                },
                {
                    "date": 1756826510307,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -21,12 +21,10 @@\n                     <li><a href=\"index.html\">Home</a></li>\r\n                     <li><a href=\"\">About</a></li>\r\n                     <li onclick=\"toggleCart()\"><img src=\"img/cart.svg\" alt=\"\" style=\"height: 44px;\"></li>\r\n                     <li><a href=\"pages/login.html\"><img src=\"img/user-logo.svg\" alt=\"\" style=\"height: 44px;\"></a>\r\n-                    <div class=\"login-container\">\r\n-  <div class=\"login-username\">Vincent James Manalastas</div>\r\n-  <button class=\"login-button\">Log Out</button>\r\n-</div></li>\r\n+      \r\n+                    </li>\r\n                 </ul>\r\n             </div>\r\n         </div>\r\n \r\n"
                },
                {
                    "date": 1756826515702,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -21,11 +21,11 @@\n                     <li><a href=\"index.html\">Home</a></li>\r\n                     <li><a href=\"\">About</a></li>\r\n                     <li onclick=\"toggleCart()\"><img src=\"img/cart.svg\" alt=\"\" style=\"height: 44px;\"></li>\r\n                     <li><a href=\"pages/login.html\"><img src=\"img/user-logo.svg\" alt=\"\" style=\"height: 44px;\"></a>\r\n-      \r\n                     </li>\r\n                 </ul>\r\n+                \r\n             </div>\r\n         </div>\r\n \r\n         <div class=\"browse\">\r\n"
                },
                {
                    "date": 1756826536040,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -23,12 +23,14 @@\n                     <li onclick=\"toggleCart()\"><img src=\"img/cart.svg\" alt=\"\" style=\"height: 44px;\"></li>\r\n                     <li><a href=\"pages/login.html\"><img src=\"img/user-logo.svg\" alt=\"\" style=\"height: 44px;\"></a>\r\n                     </li>\r\n                 </ul>\r\n-                \r\n+                <div class=\"login-container\">\r\n+                    <div class=\"login-username\">Vincent James Manalastas</div>\r\n+                    <button class=\"login-button\">Log Out</button>\r\n+                </div>\r\n             </div>\r\n         </div>\r\n-\r\n         <div class=\"browse\">\r\n             <div class=\"browse-info\">\r\n                 <h1>Browse All Books</h1>\r\n                 <p>Discover our complete collection of C, C++, and Java programming books by Herbert Schildt</p>\r\n"
                },
                {
                    "date": 1756826570214,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -26,8 +26,9 @@\n                 </ul>\r\n                 <div class=\"login-container\">\r\n                     <div class=\"login-username\">Vincent James Manalastas</div>\r\n                     <button class=\"login-button\">Log Out</button>\r\n+                    <button></button>\r\n                 </div>\r\n             </div>\r\n         </div>\r\n         <div class=\"browse\">\r\n"
                },
                {
                    "date": 1756826576190,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -26,9 +26,9 @@\n                 </ul>\r\n                 <div class=\"login-container\">\r\n                     <div class=\"login-username\">Vincent James Manalastas</div>\r\n                     <button class=\"login-button\">Log Out</button>\r\n-                    <button></button>\r\n+                    <button class=\"\"></button>\r\n                 </div>\r\n             </div>\r\n         </div>\r\n         <div class=\"browse\">\r\n"
                },
                {
                    "date": 1756826584137,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -26,9 +26,9 @@\n                 </ul>\r\n                 <div class=\"login-container\">\r\n                     <div class=\"login-username\">Vincent James Manalastas</div>\r\n                     <button class=\"login-button\">Log Out</button>\r\n-                    <button class=\"\"></button>\r\n+                    <button class=\"login-button\">G</button>\r\n                 </div>\r\n             </div>\r\n         </div>\r\n         <div class=\"browse\">\r\n"
                },
                {
                    "date": 1756826589482,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -26,9 +26,9 @@\n                 </ul>\r\n                 <div class=\"login-container\">\r\n                     <div class=\"login-username\">Vincent James Manalastas</div>\r\n                     <button class=\"login-button\">Log Out</button>\r\n-                    <button class=\"login-button\">G</button>\r\n+                    <button class=\"login-button\"></button>\r\n                 </div>\r\n             </div>\r\n         </div>\r\n         <div class=\"browse\">\r\n"
                },
                {
                    "date": 1756826595470,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -26,9 +26,9 @@\n                 </ul>\r\n                 <div class=\"login-container\">\r\n                     <div class=\"login-username\">Vincent James Manalastas</div>\r\n                     <button class=\"login-button\">Log Out</button>\r\n-                    <button class=\"login-button\"></button>\r\n+                    <button class=\"login-button\">Go to </button>\r\n                 </div>\r\n             </div>\r\n         </div>\r\n         <div class=\"browse\">\r\n"
                },
                {
                    "date": 1756826601334,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -26,9 +26,9 @@\n                 </ul>\r\n                 <div class=\"login-container\">\r\n                     <div class=\"login-username\">Vincent James Manalastas</div>\r\n                     <button class=\"login-button\">Log Out</button>\r\n-                    <button class=\"login-button\">Go to </button>\r\n+                    <button class=\"login-button\">Go to lo</button>\r\n                 </div>\r\n             </div>\r\n         </div>\r\n         <div class=\"browse\">\r\n"
                },
                {
                    "date": 1756826608606,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -26,9 +26,9 @@\n                 </ul>\r\n                 <div class=\"login-container\">\r\n                     <div class=\"login-username\">Vincent James Manalastas</div>\r\n                     <button class=\"login-button\">Log Out</button>\r\n-                    <button class=\"login-button\">Go to lo</button>\r\n+                    <button class=\"login-button\">Change </button>\r\n                 </div>\r\n             </div>\r\n         </div>\r\n         <div class=\"browse\">\r\n"
                },
                {
                    "date": 1756826623683,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -26,9 +26,8 @@\n                 </ul>\r\n                 <div class=\"login-container\">\r\n                     <div class=\"login-username\">Vincent James Manalastas</div>\r\n                     <button class=\"login-button\">Log Out</button>\r\n-                    <button class=\"login-button\">Change </button>\r\n                 </div>\r\n             </div>\r\n         </div>\r\n         <div class=\"browse\">\r\n"
                },
                {
                    "date": 1756827016062,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -209,8 +209,27 @@\n         <script>\r\n             // Clear old cart\r\n             // localStorage.removeItem('bookCart');\r\n \r\n+            function handleUserIconClick() {\r\n+    const userLink = document.querySelector('li a[href=\"pages/login.html\"]');\r\n+    const loginContainer = document.querySelector('.login-container');\r\n+\r\n+    if (!userLink || !loginContainer) return;\r\n+\r\n+    userLink.addEventListener('click', function(e) {\r\n+        const currentUser = JSON.parse(localStorage.getItem('currentUser')); // check logged-in user\r\n+        if (currentUser) {\r\n+            e.preventDefault(); // prevent navigation\r\n+            loginContainer.style.display = 'block'; // show container\r\n+        }\r\n+    });\r\n+}\r\n+\r\n+// Call the function after DOM loads\r\n+document.addEventListener('DOMContentLoaded', handleUserIconClick);\r\n+\r\n+\r\n             const categoryMap = {\r\n                 \"c programming\": \"c\",\r\n                 \"c++\": \"cpp\",\r\n                 \"java\": \"java\"\r\n"
                },
                {
                    "date": 1756827142887,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -209,25 +209,28 @@\n         <script>\r\n             // Clear old cart\r\n             // localStorage.removeItem('bookCart');\r\n \r\n+                const currentUser = localStorage.getItem('currentUser');\r\n+    console.log('Current User:', currentUser);\r\n+\r\n             function handleUserIconClick() {\r\n-    const userLink = document.querySelector('li a[href=\"pages/login.html\"]');\r\n-    const loginContainer = document.querySelector('.login-container');\r\n+                const userLink = document.querySelector('li a[href=\"pages/login.html\"]');\r\n+                const loginContainer = document.querySelector('.login-container');\r\n \r\n-    if (!userLink || !loginContainer) return;\r\n+                if (!userLink || !loginContainer) return;\r\n \r\n-    userLink.addEventListener('click', function(e) {\r\n-        const currentUser = JSON.parse(localStorage.getItem('currentUser')); // check logged-in user\r\n-        if (currentUser) {\r\n-            e.preventDefault(); // prevent navigation\r\n-            loginContainer.style.display = 'block'; // show container\r\n-        }\r\n-    });\r\n-}\r\n+                userLink.addEventListener('click', function (e) {\r\n+                    const currentUser = JSON.parse(localStorage.getItem('currentUser')); // check logged-in user\r\n+                    if (currentUser) {\r\n+                        e.preventDefault(); // prevent navigation\r\n+                        loginContainer.style.display = 'block'; // show container\r\n+                    }\r\n+                });\r\n+            }\r\n \r\n-// Call the function after DOM loads\r\n-document.addEventListener('DOMContentLoaded', handleUserIconClick);\r\n+            // Call the function after DOM loads\r\n+            document.addEventListener('DOMContentLoaded', handleUserIconClick);\r\n \r\n \r\n             const categoryMap = {\r\n                 \"c programming\": \"c\",\r\n"
                },
                {
                    "date": 1756827159742,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -209,11 +209,8 @@\n         <script>\r\n             // Clear old cart\r\n             // localStorage.removeItem('bookCart');\r\n \r\n-                const currentUser = localStorage.getItem('currentUser');\r\n-    console.log('Current User:', currentUser);\r\n-\r\n             function handleUserIconClick() {\r\n                 const userLink = document.querySelector('li a[href=\"pages/login.html\"]');\r\n                 const loginContainer = document.querySelector('.login-container');\r\n \r\n"
                },
                {
                    "date": 1756827165179,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -207,9 +207,9 @@\n         </div>\r\n \r\n         <script>\r\n             // Clear old cart\r\n-            // localStorage.removeItem('bookCart');\r\n+            localStorage.removeItem('bookCart');\r\n \r\n             function handleUserIconClick() {\r\n                 const userLink = document.querySelector('li a[href=\"pages/login.html\"]');\r\n                 const loginContainer = document.querySelector('.login-container');\r\n"
                },
                {
                    "date": 1756827175038,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -207,9 +207,9 @@\n         </div>\r\n \r\n         <script>\r\n             // Clear old cart\r\n-            localStorage.removeItem('bookCart');\r\n+            localStorage.removeItem('currentUser');\r\n \r\n             function handleUserIconClick() {\r\n                 const userLink = document.querySelector('li a[href=\"pages/login.html\"]');\r\n                 const loginContainer = document.querySelector('.login-container');\r\n"
                },
                {
                    "date": 1756827185138,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -207,9 +207,9 @@\n         </div>\r\n \r\n         <script>\r\n             // Clear old cart\r\n-            localStorage.removeItem('currentUser');\r\n+            // localStorage.removeItem('currentUser');\r\n \r\n             function handleUserIconClick() {\r\n                 const userLink = document.querySelector('li a[href=\"pages/login.html\"]');\r\n                 const loginContainer = document.querySelector('.login-container');\r\n"
                },
                {
                    "date": 1756827216613,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -25,9 +25,9 @@\n                     </li>\r\n                 </ul>\r\n                 <div class=\"login-container\">\r\n                     <div class=\"login-username\">Vincent James Manalastas</div>\r\n-                    <button class=\"login-button\">Log Out</button>\r\n+                    <button class=\"login-button\" id=\"log\">Log Out</button>\r\n                 </div>\r\n             </div>\r\n         </div>\r\n         <div class=\"browse\">\r\n"
                },
                {
                    "date": 1756827288399,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -25,9 +25,9 @@\n                     </li>\r\n                 </ul>\r\n                 <div class=\"login-container\">\r\n                     <div class=\"login-username\">Vincent James Manalastas</div>\r\n-                    <button class=\"login-button\" id=\"log\">Log Out</button>\r\n+                    <button class=\"login-button\" id=\"logOut\">Log Out</button>\r\n                 </div>\r\n             </div>\r\n         </div>\r\n         <div class=\"browse\">\r\n@@ -209,8 +209,24 @@\n         <script>\r\n             // Clear old cart\r\n             // localStorage.removeItem('currentUser');\r\n \r\n+            function setupLogout() {\r\n+    const logOutBtn = document.getElementById('logOut');\r\n+    if (!logOutBtn) return;\r\n+\r\n+    logOutBtn.addEventListener('click', () => {\r\n+        localStorage.removeItem('currentUser');\r\n+        console.log('Current user has been logged out.');\r\n+        // Optionally, you can redirect or hide UI here\r\n+        // window.location.reload(); // refresh page\r\n+    });\r\n+}\r\n+\r\n+// Call the setup function on DOMContentLoaded\r\n+document.addEventListener('DOMContentLoaded', setupLogout);\r\n+\r\n+\r\n             function handleUserIconClick() {\r\n                 const userLink = document.querySelector('li a[href=\"pages/login.html\"]');\r\n                 const loginContainer = document.querySelector('.login-container');\r\n \r\n"
                },
                {
                    "date": 1756827346640,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -209,22 +209,25 @@\n         <script>\r\n             // Clear old cart\r\n             // localStorage.removeItem('currentUser');\r\n \r\n+                const currentUser = localStorage.getItem('currentUser');\r\n+    console.log('Current User:', currentUser);\r\n+\r\n             function setupLogout() {\r\n-    const logOutBtn = document.getElementById('logOut');\r\n-    if (!logOutBtn) return;\r\n+                const logOutBtn = document.getElementById('logOut');\r\n+                if (!logOutBtn) return;\r\n \r\n-    logOutBtn.addEventListener('click', () => {\r\n-        localStorage.removeItem('currentUser');\r\n-        console.log('Current user has been logged out.');\r\n-        // Optionally, you can redirect or hide UI here\r\n-        // window.location.reload(); // refresh page\r\n-    });\r\n-}\r\n+                logOutBtn.addEventListener('click', () => {\r\n+                    localStorage.removeItem('currentUser');\r\n+                    console.log('Current user has been logged out.');\r\n+                    // Optionally, you can redirect or hide UI here\r\n+                    // window.location.reload(); // refresh page\r\n+                });\r\n+            }\r\n \r\n-// Call the setup function on DOMContentLoaded\r\n-document.addEventListener('DOMContentLoaded', setupLogout);\r\n+            // Call the setup function on DOMContentLoaded\r\n+            document.addEventListener('DOMContentLoaded', setupLogout);\r\n \r\n \r\n             function handleUserIconClick() {\r\n                 const userLink = document.querySelector('li a[href=\"pages/login.html\"]');\r\n"
                },
                {
                    "date": 1756827624577,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -209,10 +209,10 @@\n         <script>\r\n             // Clear old cart\r\n             // localStorage.removeItem('currentUser');\r\n \r\n-                const currentUser = localStorage.getItem('currentUser');\r\n-    console.log('Current User:', currentUser);\r\n+            const currentUser = localStorage.getItem('currentUser');\r\n+            console.log('Current User:', currentUser);\r\n \r\n             function setupLogout() {\r\n                 const logOutBtn = document.getElementById('logOut');\r\n                 if (!logOutBtn) return;\r\n@@ -228,27 +228,38 @@\n             // Call the setup function on DOMContentLoaded\r\n             document.addEventListener('DOMContentLoaded', setupLogout);\r\n \r\n \r\n-            function handleUserIconClick() {\r\n-                const userLink = document.querySelector('li a[href=\"pages/login.html\"]');\r\n-                const loginContainer = document.querySelector('.login-container');\r\n+function handleUserIconClick() {\r\n+    const userLink = document.querySelector('li a[href=\"pages/login.html\"]');\r\n+    const loginContainer = document.querySelector('.login-container');\r\n \r\n-                if (!userLink || !loginContainer) return;\r\n+    if (!userLink || !loginContainer) return;\r\n \r\n-                userLink.addEventListener('click', function (e) {\r\n-                    const currentUser = JSON.parse(localStorage.getItem('currentUser')); // check logged-in user\r\n-                    if (currentUser) {\r\n-                        e.preventDefault(); // prevent navigation\r\n-                        loginContainer.style.display = 'block'; // show container\r\n-                    }\r\n-                });\r\n-            }\r\n+    // Show login container if user is logged in\r\n+    userLink.addEventListener('click', function (e) {\r\n+        const currentUser = JSON.parse(localStorage.getItem('currentUser'));\r\n+        if (currentUser) {\r\n+            e.preventDefault();\r\n+            loginContainer.style.display = 'block';\r\n+        }\r\n+    });\r\n \r\n-            // Call the function after DOM loads\r\n-            document.addEventListener('DOMContentLoaded', handleUserIconClick);\r\n+    // Hide login container if click outside\r\n+    document.addEventListener('click', function (e) {\r\n+        const currentUser = JSON.parse(localStorage.getItem('currentUser'));\r\n+        if (!currentUser) return; // only if user is logged in\r\n+        if (!loginContainer.contains(e.target) && !userLink.contains(e.target)) {\r\n+            loginContainer.style.display = 'none';\r\n+        }\r\n+    });\r\n+}\r\n \r\n+// Call the function on DOM ready\r\n+document.addEventListener('DOMContentLoaded', handleUserIconClick);\r\n \r\n+\r\n+\r\n             const categoryMap = {\r\n                 \"c programming\": \"c\",\r\n                 \"c++\": \"cpp\",\r\n                 \"java\": \"java\"\r\n"
                },
                {
                    "date": 1756827678465,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -228,35 +228,35 @@\n             // Call the setup function on DOMContentLoaded\r\n             document.addEventListener('DOMContentLoaded', setupLogout);\r\n \r\n \r\n-function handleUserIconClick() {\r\n-    const userLink = document.querySelector('li a[href=\"pages/login.html\"]');\r\n-    const loginContainer = document.querySelector('.login-container');\r\n+            function handleUserIconClick() {\r\n+                const userLink = document.querySelector('li a[href=\"pages/login.html\"]');\r\n+                const loginContainer = document.querySelector('.login-container');\r\n \r\n-    if (!userLink || !loginContainer) return;\r\n+                if (!userLink || !loginContainer) return;\r\n \r\n-    // Show login container if user is logged in\r\n-    userLink.addEventListener('click', function (e) {\r\n-        const currentUser = JSON.parse(localStorage.getItem('currentUser'));\r\n-        if (currentUser) {\r\n-            e.preventDefault();\r\n-            loginContainer.style.display = 'block';\r\n-        }\r\n-    });\r\n+                // Show login container if user is logged in\r\n+                userLink.addEventListener('click', function (e) {\r\n+                    const currentUser = JSON.parse(localStorage.getItem('currentUser'));\r\n+                    if (currentUser) {\r\n+                        e.preventDefault();\r\n+                        loginContainer.style.display = 'block';\r\n+                    }\r\n+                });\r\n \r\n-    // Hide login container if click outside\r\n-    document.addEventListener('click', function (e) {\r\n-        const currentUser = JSON.parse(localStorage.getItem('currentUser'));\r\n-        if (!currentUser) return; // only if user is logged in\r\n-        if (!loginContainer.contains(e.target) && !userLink.contains(e.target)) {\r\n-            loginContainer.style.display = 'none';\r\n-        }\r\n-    });\r\n-}\r\n+                // Hide login container if click outside\r\n+                document.addEventListener('click', function (e) {\r\n+                    const currentUser = JSON.parse(localStorage.getItem('currentUser'));\r\n+                    if (!currentUser) return; // only if user is logged in\r\n+                    if (!loginContainer.contains(e.target) && !userLink.contains(e.target)) {\r\n+                        loginContainer.style.display = 'none';\r\n+                    }\r\n+                });\r\n+            }\r\n \r\n-// Call the function on DOM ready\r\n-document.addEventListener('DOMContentLoaded', handleUserIconClick);\r\n+            // Call the function on DOM ready\r\n+            document.addEventListener('DOMContentLoaded', handleUserIconClick);\r\n \r\n \r\n \r\n             const categoryMap = {\r\n@@ -290,11 +290,13 @@\n \r\n                 books.forEach(book => booksList.appendChild(book));\r\n             }\r\n \r\n+            if \r\n \r\n \r\n \r\n+\r\n             function toggleCart() {\r\n                 document.getElementById('cartSidebar').classList.toggle('open');\r\n             }\r\n \r\n"
                },
                {
                    "date": 1756827687527,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -290,9 +290,9 @@\n \r\n                 books.forEach(book => booksList.appendChild(book));\r\n             }\r\n \r\n-            if \r\n+            \r\n \r\n \r\n \r\n \r\n"
                },
                {
                    "date": 1756827739746,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -212,8 +212,21 @@\n \r\n             const currentUser = localStorage.getItem('currentUser');\r\n             console.log('Current User:', currentUser);\r\n \r\n+\r\n+            function hideBannerIfLoggedIn() {\r\n+    const currentUser = JSON.parse(localStorage.getItem('currentUser'));\r\n+    const banner = document.querySelector('.banner-post');\r\n+    if (currentUser && banner) {\r\n+        banner.style.display = 'none';\r\n+    }\r\n+}\r\n+\r\n+// Call it when the DOM is ready\r\n+document.addEventListener('DOMContentLoaded', hideBannerIfLoggedIn);\r\n+\r\n+\r\n             function setupLogout() {\r\n                 const logOutBtn = document.getElementById('logOut');\r\n                 if (!logOutBtn) return;\r\n \r\n"
                },
                {
                    "date": 1756827842801,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -213,20 +213,39 @@\n             const currentUser = localStorage.getItem('currentUser');\r\n             console.log('Current User:', currentUser);\r\n \r\n \r\n-            function hideBannerIfLoggedIn() {\r\n+            function displayLoggedInUser() {\r\n     const currentUser = JSON.parse(localStorage.getItem('currentUser'));\r\n-    const banner = document.querySelector('.banner-post');\r\n-    if (currentUser && banner) {\r\n-        banner.style.display = 'none';\r\n+    const usernameEl = document.querySelector('.login-username');\r\n+\r\n+    if (currentUser && usernameEl) {\r\n+        // If your user object has a 'name' or 'fullName' property\r\n+        usernameEl.textContent = currentUser.name || currentUser.fullName || 'User';\r\n+        usernameEl.style.display = 'inline'; // make sure it's visible\r\n+    } else if (usernameEl) {\r\n+        usernameEl.textContent = '';\r\n+        usernameEl.style.display = 'none';\r\n     }\r\n }\r\n \r\n-// Call it when the DOM is ready\r\n-document.addEventListener('DOMContentLoaded', hideBannerIfLoggedIn);\r\n+// Call on page load\r\n+document.addEventListener('DOMContentLoaded', displayLoggedInUser);\r\n \r\n \r\n+\r\n+            function hideBannerIfLoggedIn() {\r\n+                const currentUser = JSON.parse(localStorage.getItem('currentUser'));\r\n+                const banner = document.querySelector('.banner-post');\r\n+                if (currentUser && banner) {\r\n+                    banner.style.display = 'none';\r\n+                }\r\n+            }\r\n+\r\n+            // Call it when the DOM is ready\r\n+            document.addEventListener('DOMContentLoaded', hideBannerIfLoggedIn);\r\n+\r\n+\r\n             function setupLogout() {\r\n                 const logOutBtn = document.getElementById('logOut');\r\n                 if (!logOutBtn) return;\r\n \r\n@@ -303,13 +322,13 @@\n \r\n                 books.forEach(book => booksList.appendChild(book));\r\n             }\r\n \r\n-            \r\n \r\n \r\n \r\n \r\n+\r\n             function toggleCart() {\r\n                 document.getElementById('cartSidebar').classList.toggle('open');\r\n             }\r\n \r\n"
                },
                {
                    "date": 1756827872295,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -209,28 +209,28 @@\n         <script>\r\n             // Clear old cart\r\n             // localStorage.removeItem('currentUser');\r\n \r\n-            const currentUser = localStorage.getItem('currentUser');\r\n+            const currentUser = localStorage.getItem('users');\r\n             console.log('Current User:', currentUser);\r\n \r\n \r\n             function displayLoggedInUser() {\r\n-    const currentUser = JSON.parse(localStorage.getItem('currentUser'));\r\n-    const usernameEl = document.querySelector('.login-username');\r\n+                const currentUser = JSON.parse(localStorage.getItem('currentUser'));\r\n+                const usernameEl = document.querySelector('.login-username');\r\n \r\n-    if (currentUser && usernameEl) {\r\n-        // If your user object has a 'name' or 'fullName' property\r\n-        usernameEl.textContent = currentUser.name || currentUser.fullName || 'User';\r\n-        usernameEl.style.display = 'inline'; // make sure it's visible\r\n-    } else if (usernameEl) {\r\n-        usernameEl.textContent = '';\r\n-        usernameEl.style.display = 'none';\r\n-    }\r\n-}\r\n+                if (currentUser && usernameEl) {\r\n+                    // If your user object has a 'name' or 'fullName' property\r\n+                    usernameEl.textContent = currentUser.name || currentUser.fullName || 'User';\r\n+                    usernameEl.style.display = 'inline'; // make sure it's visible\r\n+                } else if (usernameEl) {\r\n+                    usernameEl.textContent = '';\r\n+                    usernameEl.style.display = 'none';\r\n+                }\r\n+            }\r\n \r\n-// Call on page load\r\n-document.addEventListener('DOMContentLoaded', displayLoggedInUser);\r\n+            // Call on page load\r\n+            document.addEventListener('DOMContentLoaded', displayLoggedInUser);\r\n \r\n \r\n \r\n             function hideBannerIfLoggedIn() {\r\n"
                },
                {
                    "date": 1756827950628,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -213,22 +213,43 @@\n             const currentUser = localStorage.getItem('users');\r\n             console.log('Current User:', currentUser);\r\n \r\n \r\n-            function displayLoggedInUser() {\r\n-                const currentUser = JSON.parse(localStorage.getItem('currentUser'));\r\n-                const usernameEl = document.querySelector('.login-username');\r\n+         function displayLoggedInUserFromStorage() {\r\n+    const currentUser = JSON.parse(localStorage.getItem('currentUser'));\r\n+    const usernameEl = document.querySelector('.login-username');\r\n+    const bannerPost = document.querySelector('.banner-post');\r\n \r\n-                if (currentUser && usernameEl) {\r\n-                    // If your user object has a 'name' or 'fullName' property\r\n-                    usernameEl.textContent = currentUser.name || currentUser.fullName || 'User';\r\n-                    usernameEl.style.display = 'inline'; // make sure it's visible\r\n-                } else if (usernameEl) {\r\n-                    usernameEl.textContent = '';\r\n-                    usernameEl.style.display = 'none';\r\n-                }\r\n-            }\r\n+    if (!usernameEl) return;\r\n \r\n+    if (currentUser) {\r\n+        // Get users array from localStorage\r\n+        const users = JSON.parse(localStorage.getItem('users')) || [];\r\n+\r\n+        // Find the user by email\r\n+        const user = users.find(u => u.email === currentUser.email);\r\n+\r\n+        if (user) {\r\n+            usernameEl.textContent = user.fullName;\r\n+            usernameEl.style.display = 'inline';\r\n+        } else {\r\n+            usernameEl.textContent = '';\r\n+            usernameEl.style.display = 'none';\r\n+        }\r\n+\r\n+        // Hide banner if user is logged in\r\n+        if (bannerPost) bannerPost.style.display = 'none';\r\n+    } else {\r\n+        usernameEl.textContent = '';\r\n+        usernameEl.style.display = 'none';\r\n+\r\n+        if (bannerPost) bannerPost.style.display = 'block';\r\n+    }\r\n+}\r\n+\r\n+// Call on page load\r\n+document.addEventListener('DOMContentLoaded', displayLoggedInUserFromStorage);\r\n+\r\n             // Call on page load\r\n             document.addEventListener('DOMContentLoaded', displayLoggedInUser);\r\n \r\n \r\n"
                },
                {
                    "date": 1756827959140,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -213,45 +213,44 @@\n             const currentUser = localStorage.getItem('users');\r\n             console.log('Current User:', currentUser);\r\n \r\n \r\n-         function displayLoggedInUserFromStorage() {\r\n-    const currentUser = JSON.parse(localStorage.getItem('currentUser'));\r\n-    const usernameEl = document.querySelector('.login-username');\r\n-    const bannerPost = document.querySelector('.banner-post');\r\n+            function displayLoggedInUserFromStorage() {\r\n+                const currentUser = JSON.parse(localStorage.getItem('currentUser'));\r\n+                const usernameEl = document.querySelector('.login-username');\r\n+                const bannerPost = document.querySelector('.banner-post');\r\n \r\n-    if (!usernameEl) return;\r\n+                if (!usernameEl) return;\r\n \r\n-    if (currentUser) {\r\n-        // Get users array from localStorage\r\n-        const users = JSON.parse(localStorage.getItem('users')) || [];\r\n+                if (currentUser) {\r\n+                    // Get users array from localStorage\r\n+                    const users = JSON.parse(localStorage.getItem('users')) || [];\r\n \r\n-        // Find the user by email\r\n-        const user = users.find(u => u.email === currentUser.email);\r\n+                    // Find the user by email\r\n+                    const user = users.find(u => u.email === currentUser.email);\r\n \r\n-        if (user) {\r\n-            usernameEl.textContent = user.fullName;\r\n-            usernameEl.style.display = 'inline';\r\n-        } else {\r\n-            usernameEl.textContent = '';\r\n-            usernameEl.style.display = 'none';\r\n-        }\r\n+                    if (user) {\r\n+                        usernameEl.textContent = user.fullName;\r\n+                        usernameEl.style.display = 'inline';\r\n+                    } else {\r\n+                        usernameEl.textContent = '';\r\n+                        usernameEl.style.display = 'none';\r\n+                    }\r\n \r\n-        // Hide banner if user is logged in\r\n-        if (bannerPost) bannerPost.style.display = 'none';\r\n-    } else {\r\n-        usernameEl.textContent = '';\r\n-        usernameEl.style.display = 'none';\r\n+                    // Hide banner if user is logged in\r\n+                    if (bannerPost) bannerPost.style.display = 'none';\r\n+                } else {\r\n+                    usernameEl.textContent = '';\r\n+                    usernameEl.style.display = 'none';\r\n \r\n-        if (bannerPost) bannerPost.style.display = 'block';\r\n-    }\r\n-}\r\n+                    if (bannerPost) bannerPost.style.display = 'block';\r\n+                }\r\n+            }\r\n \r\n-// Call on page load\r\n-document.addEventListener('DOMContentLoaded', displayLoggedInUserFromStorage);\r\n+            // Call on page load\r\n+            document.addEventListener('DOMContentLoaded', displayLoggedInUserFromStorage);\r\n \r\n             // Call on page load\r\n-            document.addEventListener('DOMContentLoaded', displayLoggedInUser);\r\n \r\n \r\n \r\n             function hideBannerIfLoggedIn() {\r\n"
                },
                {
                    "date": 1756828004312,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -246,9 +246,9 @@\n                 }\r\n             }\r\n \r\n             // Call on page load\r\n-            document.addEventListener('DOMContentLoaded', displayLoggedInUserFromStorage);\r\n+            document.addEventListener('DOMContentLoaded', displayLoggedInUserFromStorage, hideBannerIfLoggedIn);\r\n \r\n             // Call on page load\r\n \r\n \r\n"
                },
                {
                    "date": 1756828013513,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -246,9 +246,11 @@\n                 }\r\n             }\r\n \r\n             // Call on page load\r\n-            document.addEventListener('DOMContentLoaded', displayLoggedInUserFromStorage, hideBannerIfLoggedIn);\r\n+            document.addEventListener('DOMContentLoaded', displayLoggedInUserFromStorage, hideBannerIfLoggedIn,\r\n+                setupLogout\r\n+            );\r\n \r\n             // Call on page load\r\n \r\n \r\n"
                },
                {
                    "date": 1756828018892,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -279,9 +279,8 @@\n                 });\r\n             }\r\n \r\n             // Call the setup function on DOMContentLoaded\r\n-            document.addEventListener('DOMContentLoaded', setupLogout);\r\n \r\n \r\n             function handleUserIconClick() {\r\n                 const userLink = document.querySelector('li a[href=\"pages/login.html\"]');\r\n"
                },
                {
                    "date": 1756828030094,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -263,9 +263,8 @@\n                 }\r\n             }\r\n \r\n             // Call it when the DOM is ready\r\n-            document.addEventListener('DOMContentLoaded', hideBannerIfLoggedIn);\r\n \r\n \r\n             function setupLogout() {\r\n                 const logOutBtn = document.getElementById('logOut');\r\n@@ -307,9 +306,8 @@\n                 });\r\n             }\r\n \r\n             // Call the function on DOM ready\r\n-            document.addEventListener('DOMContentLoaded', handleUserIconClick);\r\n \r\n \r\n \r\n             const categoryMap = {\r\n"
                },
                {
                    "date": 1756828035942,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -247,9 +247,9 @@\n             }\r\n \r\n             // Call on page load\r\n             document.addEventListener('DOMContentLoaded', displayLoggedInUserFromStorage, hideBannerIfLoggedIn,\r\n-                setupLogout\r\n+                setupLogout, handleUserIconClick\r\n             );\r\n \r\n             // Call on page load\r\n \r\n"
                },
                {
                    "date": 1756828098745,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -260,8 +260,9 @@\n                 const banner = document.querySelector('.banner-post');\r\n                 if (currentUser && banner) {\r\n                     banner.style.display = 'none';\r\n                 }\r\n+                \r\n             }\r\n \r\n             // Call it when the DOM is ready\r\n \r\n"
                },
                {
                    "date": 1756828109131,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -260,9 +260,10 @@\n                 const banner = document.querySelector('.banner-post');\r\n                 if (currentUser && banner) {\r\n                     banner.style.display = 'none';\r\n                 }\r\n-                \r\n+                else \r\n+                banner.s\r\n             }\r\n \r\n             // Call it when the DOM is ready\r\n \r\n"
                },
                {
                    "date": 1756828117964,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -261,9 +261,9 @@\n                 if (currentUser && banner) {\r\n                     banner.style.display = 'none';\r\n                 }\r\n                 else \r\n-                banner.s\r\n+                banner.style.display = 'flex'\r\n             }\r\n \r\n             // Call it when the DOM is ready\r\n \r\n"
                },
                {
                    "date": 1756828131118,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -260,9 +260,9 @@\n                 const banner = document.querySelector('.banner-post');\r\n                 if (currentUser && banner) {\r\n                     banner.style.display = 'none';\r\n                 }\r\n-                else \r\n+                else {}\r\n                 banner.style.display = 'flex'\r\n             }\r\n \r\n             // Call it when the DOM is ready\r\n"
                },
                {
                    "date": 1756828137457,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -260,9 +260,9 @@\n                 const banner = document.querySelector('.banner-post');\r\n                 if (currentUser && banner) {\r\n                     banner.style.display = 'none';\r\n                 }\r\n-                else {}\r\n+                else {\r\n                 banner.style.display = 'flex'\r\n             }\r\n \r\n             // Call it when the DOM is ready\r\n"
                },
                {
                    "date": 1756828173585,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -254,18 +254,21 @@\n             // Call on page load\r\n \r\n \r\n \r\n-            function hideBannerIfLoggedIn() {\r\n-                const currentUser = JSON.parse(localStorage.getItem('currentUser'));\r\n-                const banner = document.querySelector('.banner-post');\r\n-                if (currentUser && banner) {\r\n-                    banner.style.display = 'none';\r\n-                }\r\n-                else {\r\n-                banner.style.display = 'flex'\r\n-            }\r\n+function hideBannerIfLoggedIn() {\r\n+    const currentUser = JSON.parse(localStorage.getItem('currentUser'));\r\n+    const banner = document.querySelector('.banner-post');\r\n \r\n+    if (!banner) return; // make sure the element exists\r\n+\r\n+    if (currentUser) {\r\n+        banner.style.display = 'none';\r\n+    } else {\r\n+        banner.style.display = 'flex'; // or whatever default display you want\r\n+    }\r\n+}\r\n+\r\n             // Call it when the DOM is ready\r\n \r\n \r\n             function setupLogout() {\r\n"
                },
                {
                    "date": 1756828364739,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -254,21 +254,20 @@\n             // Call on page load\r\n \r\n \r\n \r\n-function hideBannerIfLoggedIn() {\r\n+       function hideBannerIfLoggedIn() {\r\n     const currentUser = JSON.parse(localStorage.getItem('currentUser'));\r\n     const banner = document.querySelector('.banner-post');\r\n \r\n     if (!banner) return; // make sure the element exists\r\n \r\n     if (currentUser) {\r\n-        banner.style.display = 'none';\r\n+        banner.style.display = 'none'; // hide if logged in\r\n     } else {\r\n-        banner.style.display = 'flex'; // or whatever default display you want\r\n+        banner.style.removeProperty('display'); // restore original CSS\r\n     }\r\n }\r\n-\r\n             // Call it when the DOM is ready\r\n \r\n \r\n             function setupLogout() {\r\n"
                },
                {
                    "date": 1756829140071,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -254,20 +254,20 @@\n             // Call on page load\r\n \r\n \r\n \r\n-       function hideBannerIfLoggedIn() {\r\n-    const currentUser = JSON.parse(localStorage.getItem('currentUser'));\r\n-    const banner = document.querySelector('.banner-post');\r\n+            function hideBannerIfLoggedIn() {\r\n+                const currentUser = JSON.parse(localStorage.getItem('currentUser'));\r\n+                const banner = document.querySelector('.banner-post');\r\n \r\n-    if (!banner) return; // make sure the element exists\r\n+                if (!banner) return; // make sure the element exists\r\n \r\n-    if (currentUser) {\r\n-        banner.style.display = 'none'; // hide if logged in\r\n-    } else {\r\n-        banner.style.removeProperty('display'); // restore original CSS\r\n-    }\r\n-}\r\n+                if (currentUser) {\r\n+                    banner.style.display = 'none'; // hide if logged in\r\n+                } else {\r\n+                    banner.style.removeProperty('display'); // restore original CSS\r\n+                }\r\n+            }\r\n             // Call it when the DOM is ready\r\n \r\n \r\n             function setupLogout() {\r\n@@ -390,36 +390,46 @@\n                     console.error(\"Error fetching book data:\", error);\r\n                 }\r\n             }\r\n \r\n-            function addToCart(button) {\r\n-                const bookItem = button.closest(\"li\");\r\n-                const title = bookItem.querySelector(\".bookTitle\").innerText.trim();\r\n-                const priceText = bookItem.querySelector(\".pricetag\").innerText.trim();\r\n-                const price = parseFloat(priceText.replace(\"$\", \"\"));\r\n-                const image = bookItem.querySelector(\".img-book img\")?.src || \"img/books/placeholder.jpg\";\r\n+   function addToCart(button) {\r\n+    const bookItem = button.closest(\"li\");\r\n+    const title = bookItem.querySelector(\".bookTitle\").innerText.trim();\r\n+    const priceText = bookItem.querySelector(\".pricetag\").innerText.trim();\r\n+    const price = parseFloat(priceText.replace(\"$\", \"\"));\r\n+    const image = bookItem.querySelector(\".img-book img\")?.src || \"img/books/placeholder.jpg\";\r\n \r\n-                // Get current cart\r\n-                let cart = JSON.parse(localStorage.getItem(\"bookCart\")) || [];\r\n+    // Get currentUser and users\r\n+    const currentUser = JSON.parse(localStorage.getItem(\"currentUser\"));\r\n+    let users = JSON.parse(localStorage.getItem(\"users\")) || [];\r\n \r\n-                // Check if book already in cart\r\n-                const existing = cart.find(item => item.title === title);\r\n-                if (existing) {\r\n-                    alert(\"This book is already in your cart!\");\r\n-                    return;\r\n-                }\r\n+    if (!currentUser || users.length === 0) return alert(\"No user logged in!\");\r\n \r\n-                // Add book to cart\r\n-                cart.push({ title, price, image });\r\n-                localStorage.setItem(\"bookCart\", JSON.stringify(cart));\r\n+    // Find user in users array\r\n+    const userIndex = users.findIndex(u => u.email === currentUser[0].email);\r\n+    if (userIndex === -1) return alert(\"User not found!\");\r\n \r\n-                // Show notification\r\n-                showCartNotification(title);\r\n+    const user = users[userIndex];\r\n \r\n-                // Re-render cart\r\n-                renderCart();\r\n-            }\r\n+    // Check if book already in user's cart\r\n+    const existing = user.cart.find(item => item.title === title);\r\n+    if (existing) return alert(\"This book is already in your cart!\");\r\n \r\n+    // Add book to user's cart\r\n+    user.cart.push({ title, price, image });\r\n+\r\n+    // Update users and currentUser in localStorage\r\n+    users[userIndex] = user;\r\n+    localStorage.setItem(\"users\", JSON.stringify(users));\r\n+    localStorage.setItem(\"currentUser\", JSON.stringify([user]));\r\n+\r\n+    // Show notification\r\n+    showCartNotification(title);\r\n+\r\n+    // Re-render cart\r\n+    renderCart();\r\n+}\r\n+\r\n             // Function to show cart notification\r\n             function showCartNotification(title) {\r\n                 const notification = document.getElementById(\"cartNotification\");\r\n                 notification.innerText = `\"${title}\" added to cart!`;\r\n"
                },
                {
                    "date": 1756829152766,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -390,45 +390,45 @@\n                     console.error(\"Error fetching book data:\", error);\r\n                 }\r\n             }\r\n \r\n-   function addToCart(button) {\r\n-    const bookItem = button.closest(\"li\");\r\n-    const title = bookItem.querySelector(\".bookTitle\").innerText.trim();\r\n-    const priceText = bookItem.querySelector(\".pricetag\").innerText.trim();\r\n-    const price = parseFloat(priceText.replace(\"$\", \"\"));\r\n-    const image = bookItem.querySelector(\".img-book img\")?.src || \"img/books/placeholder.jpg\";\r\n+            function addToCart(button) {\r\n+                const bookItem = button.closest(\"li\");\r\n+                const title = bookItem.querySelector(\".bookTitle\").innerText.trim();\r\n+                const priceText = bookItem.querySelector(\".pricetag\").innerText.trim();\r\n+                const price = parseFloat(priceText.replace(\"$\", \"\"));\r\n+                const image = bookItem.querySelector(\".img-book img\")?.src || \"img/books/placeholder.jpg\";\r\n \r\n-    // Get currentUser and users\r\n-    const currentUser = JSON.parse(localStorage.getItem(\"currentUser\"));\r\n-    let users = JSON.parse(localStorage.getItem(\"users\")) || [];\r\n+                // Get currentUser and users\r\n+                const currentUser = JSON.parse(localStorage.getItem(\"currentUser\"));\r\n+                let users = JSON.parse(localStorage.getItem(\"users\")) || [];\r\n \r\n-    if (!currentUser || users.length === 0) return alert(\"No user logged in!\");\r\n+                if (!currentUser || users.length === 0) return alert(\"No user logged in!\");\r\n \r\n-    // Find user in users array\r\n-    const userIndex = users.findIndex(u => u.email === currentUser[0].email);\r\n-    if (userIndex === -1) return alert(\"User not found!\");\r\n+                // Find user in users array\r\n+                const userIndex = users.findIndex(u => u.email === currentUser[0].email);\r\n+                if (userIndex === -1) return alert(\"User not found!\");\r\n \r\n-    const user = users[userIndex];\r\n+                const user = users[userIndex];\r\n \r\n-    // Check if book already in user's cart\r\n-    const existing = user.cart.find(item => item.title === title);\r\n-    if (existing) return alert(\"This book is already in your cart!\");\r\n+                // Check if book already in user's cart\r\n+                const existing = user.cart.find(item => item.title === title);\r\n+                if (existing) return alert(\"This book is already in your cart!\");\r\n \r\n-    // Add book to user's cart\r\n-    user.cart.push({ title, price, image });\r\n+                // Add book to user's cart\r\n+                user.cart.push({ title, price, image });\r\n \r\n-    // Update users and currentUser in localStorage\r\n-    users[userIndex] = user;\r\n-    localStorage.setItem(\"users\", JSON.stringify(users));\r\n-    localStorage.setItem(\"currentUser\", JSON.stringify([user]));\r\n+                // Update users and currentUser in localStorage\r\n+                users[userIndex] = user;\r\n+                localStorage.setItem(\"users\", JSON.stringify(users));\r\n+                localStorage.setItem(\"currentUser\", JSON.stringify([user]));\r\n \r\n-    // Show notification\r\n-    showCartNotification(title);\r\n+                // Show notification\r\n+                showCartNotification(title);\r\n \r\n-    // Re-render cart\r\n-    renderCart();\r\n-}\r\n+                // Re-render cart\r\n+                renderCart();\r\n+            }\r\n \r\n             // Function to show cart notification\r\n             function showCartNotification(title) {\r\n                 const notification = document.getElementById(\"cartNotification\");\r\n@@ -440,63 +440,50 @@\n                     notification.classList.remove(\"show\");\r\n                 }, 2000);\r\n             }\r\n \r\n-            async function renderCart() {\r\n-                const cartItemsContainer = document.querySelector(\".cart-items\");\r\n-                if (!cartItemsContainer) {\r\n-                    const div = document.createElement(\"div\");\r\n-                    div.className = \"cart-items\";\r\n-                    document.getElementById(\"cartSidebar\").insertBefore(div, document.querySelector(\".cart-footer\"));\r\n-                }\r\n+   async function renderCart() {\r\n+    const cartItemsContainer = document.querySelector(\".cart-items\");\r\n+    if (!cartItemsContainer) return;\r\n \r\n-                const cart = JSON.parse(localStorage.getItem(\"bookCart\")) || [];\r\n-                const cartContainer = document.querySelector(\".cart-items\");\r\n-                cartContainer.innerHTML = \"\";\r\n+    const currentUser = JSON.parse(localStorage.getItem(\"currentUser\"));\r\n+    if (!currentUser || !currentUser[0].cart) return;\r\n \r\n-                let total = 0;\r\n+    const cart = currentUser[0].cart;\r\n+    cartItemsContainer.innerHTML = \"\";\r\n \r\n-                try {\r\n-                    const response = await fetch(\"all-books.json\");\r\n-                    const booksData = await response.json();\r\n+    let total = 0;\r\n \r\n-                    cart.forEach((item, index) => {\r\n-                        total += item.price;\r\n+    try {\r\n+        const response = await fetch(\"all-books.json\");\r\n+        const booksData = await response.json();\r\n \r\n-                        // Find the book in JSON to get the correct image\r\n-                        const bookData = booksData.find(b => b.title === item.title);\r\n+        cart.forEach((item, index) => {\r\n+            total += item.price;\r\n \r\n-                        if (!bookData) {\r\n-                            console.warn(`Book not found in JSON: \"${item.title}\"`);\r\n-                            return; // skip this cart item if not found\r\n-                        }\r\n+            const bookData = booksData.find(b => b.title === item.title);\r\n+            const image = bookData ? bookData.image : item.image;\r\n \r\n-                        const image = bookData.image; // get image from JSON\r\n-\r\n-                        console.log(`Cart item: ${item.title}, Image used: ${image}`);\r\n-\r\n-                        const cartItem = document.createElement(\"div\");\r\n-                        cartItem.className = \"cart-item\";\r\n-                        cartItem.innerHTML = `\r\n+            const cartItem = document.createElement(\"div\");\r\n+            cartItem.className = \"cart-item\";\r\n+            cartItem.innerHTML = `\r\n                 <img src=\"${image}\" alt=\"Book\">\r\n                 <div class=\"cart-item-info\">\r\n                     <h4>${item.title}</h4>\r\n                     <p>$${item.price.toFixed(2)}</p>\r\n                     <button class=\"remove-btn\" onclick=\"removeFromCart(${index})\">Remove</button>\r\n                 </div>\r\n             `;\r\n-                        cartContainer.appendChild(cartItem);\r\n-                    });\r\n+            cartItemsContainer.appendChild(cartItem);\r\n+        });\r\n \r\n-                    // Update total\r\n-                    document.querySelector(\".cart-total span:last-child\").innerText = `$${total.toFixed(2)}`;\r\n+        document.querySelector(\".cart-total span:last-child\").innerText = `$${total.toFixed(2)}`;\r\n+    } catch (err) {\r\n+        console.error(\"Error fetching all-books.json:\", err);\r\n+    }\r\n+}\r\n \r\n-                } catch (err) {\r\n-                    console.error(\"Error fetching all-books.json:\", err);\r\n-                }\r\n-            }\r\n \r\n-\r\n             // Remove item from cart\r\n             function removeFromCart(index) {\r\n                 let cart = JSON.parse(localStorage.getItem(\"bookCart\")) || [];\r\n                 cart.splice(index, 1);\r\n"
                },
                {
                    "date": 1756829192340,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -440,58 +440,69 @@\n                     notification.classList.remove(\"show\");\r\n                 }, 2000);\r\n             }\r\n \r\n-   async function renderCart() {\r\n-    const cartItemsContainer = document.querySelector(\".cart-items\");\r\n-    if (!cartItemsContainer) return;\r\n+            async function renderCart() {\r\n+                const cartItemsContainer = document.querySelector(\".cart-items\");\r\n+                if (!cartItemsContainer) return;\r\n \r\n-    const currentUser = JSON.parse(localStorage.getItem(\"currentUser\"));\r\n-    if (!currentUser || !currentUser[0].cart) return;\r\n+                const currentUser = JSON.parse(localStorage.getItem(\"currentUser\"));\r\n+                if (!currentUser || !currentUser[0].cart) return;\r\n \r\n-    const cart = currentUser[0].cart;\r\n-    cartItemsContainer.innerHTML = \"\";\r\n+                const cart = currentUser[0].cart;\r\n+                cartItemsContainer.innerHTML = \"\";\r\n \r\n-    let total = 0;\r\n+                let total = 0;\r\n \r\n-    try {\r\n-        const response = await fetch(\"all-books.json\");\r\n-        const booksData = await response.json();\r\n+                try {\r\n+                    const response = await fetch(\"all-books.json\");\r\n+                    const booksData = await response.json();\r\n \r\n-        cart.forEach((item, index) => {\r\n-            total += item.price;\r\n+                    cart.forEach((item, index) => {\r\n+                        total += item.price;\r\n \r\n-            const bookData = booksData.find(b => b.title === item.title);\r\n-            const image = bookData ? bookData.image : item.image;\r\n+                        const bookData = booksData.find(b => b.title === item.title);\r\n+                        const image = bookData ? bookData.image : item.image;\r\n \r\n-            const cartItem = document.createElement(\"div\");\r\n-            cartItem.className = \"cart-item\";\r\n-            cartItem.innerHTML = `\r\n+                        const cartItem = document.createElement(\"div\");\r\n+                        cartItem.className = \"cart-item\";\r\n+                        cartItem.innerHTML = `\r\n                 <img src=\"${image}\" alt=\"Book\">\r\n                 <div class=\"cart-item-info\">\r\n                     <h4>${item.title}</h4>\r\n                     <p>$${item.price.toFixed(2)}</p>\r\n                     <button class=\"remove-btn\" onclick=\"removeFromCart(${index})\">Remove</button>\r\n                 </div>\r\n             `;\r\n-            cartItemsContainer.appendChild(cartItem);\r\n-        });\r\n+                        cartItemsContainer.appendChild(cartItem);\r\n+                    });\r\n \r\n-        document.querySelector(\".cart-total span:last-child\").innerText = `$${total.toFixed(2)}`;\r\n-    } catch (err) {\r\n-        console.error(\"Error fetching all-books.json:\", err);\r\n-    }\r\n+                    document.querySelector(\".cart-total span:last-child\").innerText = `$${total.toFixed(2)}`;\r\n+                } catch (err) {\r\n+                    console.error(\"Error fetching all-books.json:\", err);\r\n+                }\r\n+            }\r\n+\r\n+\r\n+        function removeFromCart(index) {\r\n+    const currentUser = JSON.parse(localStorage.getItem(\"currentUser\"));\r\n+    let users = JSON.parse(localStorage.getItem(\"users\")) || [];\r\n+\r\n+    if (!currentUser || users.length === 0) return;\r\n+\r\n+    const userIndex = users.findIndex(u => u.email === currentUser[0].email);\r\n+    if (userIndex === -1) return;\r\n+\r\n+    users[userIndex].cart.splice(index, 1);\r\n+\r\n+    // Save updates\r\n+    localStorage.setItem(\"users\", JSON.stringify(users));\r\n+    localStorage.setItem(\"currentUser\", JSON.stringify([users[userIndex]]));\r\n+\r\n+    renderCart();\r\n }\r\n \r\n \r\n-            // Remove item from cart\r\n-            function removeFromCart(index) {\r\n-                let cart = JSON.parse(localStorage.getItem(\"bookCart\")) || [];\r\n-                cart.splice(index, 1);\r\n-                localStorage.setItem(\"bookCart\", JSON.stringify(cart));\r\n-                renderCart();\r\n-            }\r\n-\r\n             // Initialize cart on page load\r\n             document.addEventListener(\"DOMContentLoaded\", () => {\r\n                 renderCart();\r\n             });\r\n"
                },
                {
                    "date": 1756829434806,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -390,45 +390,47 @@\n                     console.error(\"Error fetching book data:\", error);\r\n                 }\r\n             }\r\n \r\n-            function addToCart(button) {\r\n-                const bookItem = button.closest(\"li\");\r\n-                const title = bookItem.querySelector(\".bookTitle\").innerText.trim();\r\n-                const priceText = bookItem.querySelector(\".pricetag\").innerText.trim();\r\n-                const price = parseFloat(priceText.replace(\"$\", \"\"));\r\n-                const image = bookItem.querySelector(\".img-book img\")?.src || \"img/books/placeholder.jpg\";\r\n+   function addToCart(button) {\r\n+    const bookItem = button.closest(\"li\");\r\n+    const title = bookItem.querySelector(\".bookTitle\").innerText.trim();\r\n+    const priceText = bookItem.querySelector(\".pricetag\").innerText.trim();\r\n+    const price = parseFloat(priceText.replace(\"$\", \"\"));\r\n+    const image = bookItem.querySelector(\".img-book img\")?.src || \"img/books/placeholder.jpg\";\r\n \r\n-                // Get currentUser and users\r\n-                const currentUser = JSON.parse(localStorage.getItem(\"currentUser\"));\r\n-                let users = JSON.parse(localStorage.getItem(\"users\")) || [];\r\n+    // Get current user fullName\r\n+    const currentUserFullName = localStorage.getItem(\"currentUser\");\r\n+    if (!currentUserFullName) return alert(\"Please log in first.\");\r\n \r\n-                if (!currentUser || users.length === 0) return alert(\"No user logged in!\");\r\n+    // Get all users\r\n+    const users = JSON.parse(localStorage.getItem(\"users\")) || [];\r\n+    const userIndex = users.findIndex(u => u.fullName === currentUserFullName);\r\n+    if (userIndex === -1) return alert(\"User not found.\");\r\n \r\n-                // Find user in users array\r\n-                const userIndex = users.findIndex(u => u.email === currentUser[0].email);\r\n-                if (userIndex === -1) return alert(\"User not found!\");\r\n+    const user = users[userIndex];\r\n \r\n-                const user = users[userIndex];\r\n+    // Check if book already in cart\r\n+    const existing = user.cart.find(item => item.title === title);\r\n+    if (existing) {\r\n+        alert(\"This book is already in your cart!\");\r\n+        return;\r\n+    }\r\n \r\n-                // Check if book already in user's cart\r\n-                const existing = user.cart.find(item => item.title === title);\r\n-                if (existing) return alert(\"This book is already in your cart!\");\r\n+    // Add book to user's cart\r\n+    user.cart.push({ title, price, image });\r\n \r\n-                // Add book to user's cart\r\n-                user.cart.push({ title, price, image });\r\n+    // Update users in localStorage\r\n+    users[userIndex] = user;\r\n+    localStorage.setItem(\"users\", JSON.stringify(users));\r\n \r\n-                // Update users and currentUser in localStorage\r\n-                users[userIndex] = user;\r\n-                localStorage.setItem(\"users\", JSON.stringify(users));\r\n-                localStorage.setItem(\"currentUser\", JSON.stringify([user]));\r\n+    // Show notification\r\n+    showCartNotification(title);\r\n \r\n-                // Show notification\r\n-                showCartNotification(title);\r\n+    // Re-render cart\r\n+    renderCart();\r\n+}\r\n \r\n-                // Re-render cart\r\n-                renderCart();\r\n-            }\r\n \r\n             // Function to show cart notification\r\n             function showCartNotification(title) {\r\n                 const notification = document.getElementById(\"cartNotification\");\r\n@@ -482,25 +484,25 @@\n                 }\r\n             }\r\n \r\n \r\n-        function removeFromCart(index) {\r\n-    const currentUser = JSON.parse(localStorage.getItem(\"currentUser\"));\r\n-    let users = JSON.parse(localStorage.getItem(\"users\")) || [];\r\n+            function removeFromCart(index) {\r\n+                const currentUser = JSON.parse(localStorage.getItem(\"currentUser\"));\r\n+                let users = JSON.parse(localStorage.getItem(\"users\")) || [];\r\n \r\n-    if (!currentUser || users.length === 0) return;\r\n+                if (!currentUser || users.length === 0) return;\r\n \r\n-    const userIndex = users.findIndex(u => u.email === currentUser[0].email);\r\n-    if (userIndex === -1) return;\r\n+                const userIndex = users.findIndex(u => u.email === currentUser[0].email);\r\n+                if (userIndex === -1) return;\r\n \r\n-    users[userIndex].cart.splice(index, 1);\r\n+                users[userIndex].cart.splice(index, 1);\r\n \r\n-    // Save updates\r\n-    localStorage.setItem(\"users\", JSON.stringify(users));\r\n-    localStorage.setItem(\"currentUser\", JSON.stringify([users[userIndex]]));\r\n+                // Save updates\r\n+                localStorage.setItem(\"users\", JSON.stringify(users));\r\n+                localStorage.setItem(\"currentUser\", JSON.stringify([users[userIndex]]));\r\n \r\n-    renderCart();\r\n-}\r\n+                renderCart();\r\n+            }\r\n \r\n \r\n             // Initialize cart on page load\r\n             document.addEventListener(\"DOMContentLoaded\", () => {\r\n"
                },
                {
                    "date": 1756829507646,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -390,46 +390,46 @@\n                     console.error(\"Error fetching book data:\", error);\r\n                 }\r\n             }\r\n \r\n-   function addToCart(button) {\r\n-    const bookItem = button.closest(\"li\");\r\n-    const title = bookItem.querySelector(\".bookTitle\").innerText.trim();\r\n-    const priceText = bookItem.querySelector(\".pricetag\").innerText.trim();\r\n-    const price = parseFloat(priceText.replace(\"$\", \"\"));\r\n-    const image = bookItem.querySelector(\".img-book img\")?.src || \"img/books/placeholder.jpg\";\r\n+            function addToCart(button) {\r\n+                const bookItem = button.closest(\"li\");\r\n+                const title = bookItem.querySelector(\".bookTitle\").innerText.trim();\r\n+                const priceText = bookItem.querySelector(\".pricetag\").innerText.trim();\r\n+                const price = parseFloat(priceText.replace(\"$\", \"\"));\r\n+                const image = bookItem.querySelector(\".img-book img\")?.src || \"img/books/placeholder.jpg\";\r\n \r\n-    // Get current user fullName\r\n-    const currentUserFullName = localStorage.getItem(\"currentUser\");\r\n-    if (!currentUserFullName) return alert(\"Please log in first.\");\r\n+                // Get current user fullName\r\n+                const currentUserFullName = localStorage.getItem(\"currentUser\");\r\n+                if (!currentUserFullName) return alert(\"Please log in first.\");\r\n \r\n-    // Get all users\r\n-    const users = JSON.parse(localStorage.getItem(\"users\")) || [];\r\n-    const userIndex = users.findIndex(u => u.fullName === currentUserFullName);\r\n-    if (userIndex === -1) return alert(\"User not found.\");\r\n+                // Get all users\r\n+                const users = JSON.parse(localStorage.getItem(\"users\")) || [];\r\n+                const userIndex = users.findIndex(u => u.fullName === currentUserFullName);\r\n+                if (userIndex === -1) return alert(\"User not found.\");\r\n \r\n-    const user = users[userIndex];\r\n+                const user = users[userIndex];\r\n \r\n-    // Check if book already in cart\r\n-    const existing = user.cart.find(item => item.title === title);\r\n-    if (existing) {\r\n-        alert(\"This book is already in your cart!\");\r\n-        return;\r\n-    }\r\n+                // Check if book already in cart\r\n+                const existing = user.cart.find(item => item.title === title);\r\n+                if (existing) {\r\n+                    alert(\"This book is already in your cart!\");\r\n+                    return;\r\n+                }\r\n \r\n-    // Add book to user's cart\r\n-    user.cart.push({ title, price, image });\r\n+                // Add book to user's cart\r\n+                user.cart.push({ title, price, image });\r\n \r\n-    // Update users in localStorage\r\n-    users[userIndex] = user;\r\n-    localStorage.setItem(\"users\", JSON.stringify(users));\r\n+                // Update users in localStorage\r\n+                users[userIndex] = user;\r\n+                localStorage.setItem(\"users\", JSON.stringify(users));\r\n \r\n-    // Show notification\r\n-    showCartNotification(title);\r\n+                // Show notification\r\n+                showCartNotification(title);\r\n \r\n-    // Re-render cart\r\n-    renderCart();\r\n-}\r\n+                // Re-render cart\r\n+                renderCart();\r\n+            }\r\n \r\n \r\n             // Function to show cart notification\r\n             function showCartNotification(title) {\r\n@@ -442,50 +442,58 @@\n                     notification.classList.remove(\"show\");\r\n                 }, 2000);\r\n             }\r\n \r\n-            async function renderCart() {\r\n-                const cartItemsContainer = document.querySelector(\".cart-items\");\r\n-                if (!cartItemsContainer) return;\r\n+     async function renderCart() {\r\n+    const cartItemsContainer = document.querySelector(\".cart-items\");\r\n+    if (!cartItemsContainer) {\r\n+        const div = document.createElement(\"div\");\r\n+        div.className = \"cart-items\";\r\n+        document.getElementById(\"cartSidebar\").insertBefore(div, document.querySelector(\".cart-footer\"));\r\n+    }\r\n \r\n-                const currentUser = JSON.parse(localStorage.getItem(\"currentUser\"));\r\n-                if (!currentUser || !currentUser[0].cart) return;\r\n+    const currentUserFullName = localStorage.getItem(\"currentUser\");\r\n+    const users = JSON.parse(localStorage.getItem(\"users\")) || [];\r\n+    const user = users.find(u => u.fullName === currentUserFullName);\r\n+    const cart = user?.cart || [];\r\n \r\n-                const cart = currentUser[0].cart;\r\n-                cartItemsContainer.innerHTML = \"\";\r\n+    const cartContainer = document.querySelector(\".cart-items\");\r\n+    cartContainer.innerHTML = \"\";\r\n \r\n-                let total = 0;\r\n+    let total = 0;\r\n \r\n-                try {\r\n-                    const response = await fetch(\"all-books.json\");\r\n-                    const booksData = await response.json();\r\n+    try {\r\n+        const response = await fetch(\"all-books.json\");\r\n+        const booksData = await response.json();\r\n \r\n-                    cart.forEach((item, index) => {\r\n-                        total += item.price;\r\n+        cart.forEach((item, index) => {\r\n+            total += item.price;\r\n \r\n-                        const bookData = booksData.find(b => b.title === item.title);\r\n-                        const image = bookData ? bookData.image : item.image;\r\n+            const bookData = booksData.find(b => b.title === item.title);\r\n+            const image = bookData?.image || item.image;\r\n \r\n-                        const cartItem = document.createElement(\"div\");\r\n-                        cartItem.className = \"cart-item\";\r\n-                        cartItem.innerHTML = `\r\n+            const cartItem = document.createElement(\"div\");\r\n+            cartItem.className = \"cart-item\";\r\n+            cartItem.innerHTML = `\r\n                 <img src=\"${image}\" alt=\"Book\">\r\n                 <div class=\"cart-item-info\">\r\n                     <h4>${item.title}</h4>\r\n                     <p>$${item.price.toFixed(2)}</p>\r\n                     <button class=\"remove-btn\" onclick=\"removeFromCart(${index})\">Remove</button>\r\n                 </div>\r\n             `;\r\n-                        cartItemsContainer.appendChild(cartItem);\r\n-                    });\r\n+            cartContainer.appendChild(cartItem);\r\n+        });\r\n \r\n-                    document.querySelector(\".cart-total span:last-child\").innerText = `$${total.toFixed(2)}`;\r\n-                } catch (err) {\r\n-                    console.error(\"Error fetching all-books.json:\", err);\r\n-                }\r\n-            }\r\n+        // Update total\r\n+        document.querySelector(\".cart-total span:last-child\").innerText = `$${total.toFixed(2)}`;\r\n \r\n+    } catch (err) {\r\n+        console.error(\"Error fetching all-books.json:\", err);\r\n+    }\r\n+}\r\n \r\n+\r\n             function removeFromCart(index) {\r\n                 const currentUser = JSON.parse(localStorage.getItem(\"currentUser\"));\r\n                 let users = JSON.parse(localStorage.getItem(\"users\")) || [];\r\n \r\n"
                },
                {
                    "date": 1756829519160,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -442,77 +442,69 @@\n                     notification.classList.remove(\"show\");\r\n                 }, 2000);\r\n             }\r\n \r\n-     async function renderCart() {\r\n-    const cartItemsContainer = document.querySelector(\".cart-items\");\r\n-    if (!cartItemsContainer) {\r\n-        const div = document.createElement(\"div\");\r\n-        div.className = \"cart-items\";\r\n-        document.getElementById(\"cartSidebar\").insertBefore(div, document.querySelector(\".cart-footer\"));\r\n-    }\r\n+            async function renderCart() {\r\n+                const cartItemsContainer = document.querySelector(\".cart-items\");\r\n+                if (!cartItemsContainer) {\r\n+                    const div = document.createElement(\"div\");\r\n+                    div.className = \"cart-items\";\r\n+                    document.getElementById(\"cartSidebar\").insertBefore(div, document.querySelector(\".cart-footer\"));\r\n+                }\r\n \r\n-    const currentUserFullName = localStorage.getItem(\"currentUser\");\r\n-    const users = JSON.parse(localStorage.getItem(\"users\")) || [];\r\n-    const user = users.find(u => u.fullName === currentUserFullName);\r\n-    const cart = user?.cart || [];\r\n+                const currentUserFullName = localStorage.getItem(\"currentUser\");\r\n+                const users = JSON.parse(localStorage.getItem(\"users\")) || [];\r\n+                const user = users.find(u => u.fullName === currentUserFullName);\r\n+                const cart = user?.cart || [];\r\n \r\n-    const cartContainer = document.querySelector(\".cart-items\");\r\n-    cartContainer.innerHTML = \"\";\r\n+                const cartContainer = document.querySelector(\".cart-items\");\r\n+                cartContainer.innerHTML = \"\";\r\n \r\n-    let total = 0;\r\n+                let total = 0;\r\n \r\n-    try {\r\n-        const response = await fetch(\"all-books.json\");\r\n-        const booksData = await response.json();\r\n+                try {\r\n+                    const response = await fetch(\"all-books.json\");\r\n+                    const booksData = await response.json();\r\n \r\n-        cart.forEach((item, index) => {\r\n-            total += item.price;\r\n+                    cart.forEach((item, index) => {\r\n+                        total += item.price;\r\n \r\n-            const bookData = booksData.find(b => b.title === item.title);\r\n-            const image = bookData?.image || item.image;\r\n+                        const bookData = booksData.find(b => b.title === item.title);\r\n+                        const image = bookData?.image || item.image;\r\n \r\n-            const cartItem = document.createElement(\"div\");\r\n-            cartItem.className = \"cart-item\";\r\n-            cartItem.innerHTML = `\r\n+                        const cartItem = document.createElement(\"div\");\r\n+                        cartItem.className = \"cart-item\";\r\n+                        cartItem.innerHTML = `\r\n                 <img src=\"${image}\" alt=\"Book\">\r\n                 <div class=\"cart-item-info\">\r\n                     <h4>${item.title}</h4>\r\n                     <p>$${item.price.toFixed(2)}</p>\r\n                     <button class=\"remove-btn\" onclick=\"removeFromCart(${index})\">Remove</button>\r\n                 </div>\r\n             `;\r\n-            cartContainer.appendChild(cartItem);\r\n-        });\r\n+                        cartContainer.appendChild(cartItem);\r\n+                    });\r\n \r\n-        // Update total\r\n-        document.querySelector(\".cart-total span:last-child\").innerText = `$${total.toFixed(2)}`;\r\n+                    // Update total\r\n+                    document.querySelector(\".cart-total span:last-child\").innerText = `$${total.toFixed(2)}`;\r\n \r\n-    } catch (err) {\r\n-        console.error(\"Error fetching all-books.json:\", err);\r\n-    }\r\n-}\r\n+                } catch (err) {\r\n+                    console.error(\"Error fetching all-books.json:\", err);\r\n+                }\r\n+            }\r\n \r\n \r\n-            function removeFromCart(index) {\r\n-                const currentUser = JSON.parse(localStorage.getItem(\"currentUser\"));\r\n-                let users = JSON.parse(localStorage.getItem(\"users\")) || [];\r\n+        function removeFromCart(index) {\r\n+    const currentUserFullName = localStorage.getItem(\"currentUser\");\r\n+    const users = JSON.parse(localStorage.getItem(\"users\")) || [];\r\n+    const userIndex = users.findIndex(u => u.fullName === currentUserFullName);\r\n+    if (userIndex === -1) return;\r\n \r\n-                if (!currentUser || users.length === 0) return;\r\n+    users[userIndex].cart.splice(index, 1);\r\n+    localStorage.setItem(\"users\", JSON.stringify(users));\r\n+    renderCart();\r\n+}\r\n \r\n-                const userIndex = users.findIndex(u => u.email === currentUser[0].email);\r\n-                if (userIndex === -1) return;\r\n-\r\n-                users[userIndex].cart.splice(index, 1);\r\n-\r\n-                // Save updates\r\n-                localStorage.setItem(\"users\", JSON.stringify(users));\r\n-                localStorage.setItem(\"currentUser\", JSON.stringify([users[userIndex]]));\r\n-\r\n-                renderCart();\r\n-            }\r\n-\r\n-\r\n             // Initialize cart on page load\r\n             document.addEventListener(\"DOMContentLoaded\", () => {\r\n                 renderCart();\r\n             });\r\n"
                },
                {
                    "date": 1756829583791,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -209,9 +209,9 @@\n         <script>\r\n             // Clear old cart\r\n             // localStorage.removeItem('currentUser');\r\n \r\n-            const currentUser = localStorage.getItem('users');\r\n+            const currentUser = localStorage.getItem('currentUsers');\r\n             console.log('Current User:', currentUser);\r\n \r\n \r\n             function displayLoggedInUserFromStorage() {\r\n@@ -492,18 +492,18 @@\n                 }\r\n             }\r\n \r\n \r\n-        function removeFromCart(index) {\r\n-    const currentUserFullName = localStorage.getItem(\"currentUser\");\r\n-    const users = JSON.parse(localStorage.getItem(\"users\")) || [];\r\n-    const userIndex = users.findIndex(u => u.fullName === currentUserFullName);\r\n-    if (userIndex === -1) return;\r\n+            function removeFromCart(index) {\r\n+                const currentUserFullName = localStorage.getItem(\"currentUser\");\r\n+                const users = JSON.parse(localStorage.getItem(\"users\")) || [];\r\n+                const userIndex = users.findIndex(u => u.fullName === currentUserFullName);\r\n+                if (userIndex === -1) return;\r\n \r\n-    users[userIndex].cart.splice(index, 1);\r\n-    localStorage.setItem(\"users\", JSON.stringify(users));\r\n-    renderCart();\r\n-}\r\n+                users[userIndex].cart.splice(index, 1);\r\n+                localStorage.setItem(\"users\", JSON.stringify(users));\r\n+                renderCart();\r\n+            }\r\n \r\n             // Initialize cart on page load\r\n             document.addEventListener(\"DOMContentLoaded\", () => {\r\n                 renderCart();\r\n"
                },
                {
                    "date": 1756829657716,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -209,9 +209,9 @@\n         <script>\r\n             // Clear old cart\r\n             // localStorage.removeItem('currentUser');\r\n \r\n-            const currentUser = localStorage.getItem('currentUsers');\r\n+            const currentUser = localStorage.getItem('currentUser');\r\n             console.log('Current User:', currentUser);\r\n \r\n \r\n             function displayLoggedInUserFromStorage() {\r\n@@ -246,12 +246,16 @@\n                 }\r\n             }\r\n \r\n             // Call on page load\r\n-            document.addEventListener('DOMContentLoaded', displayLoggedInUserFromStorage, hideBannerIfLoggedIn,\r\n-                setupLogout, handleUserIconClick\r\n-            );\r\n+          document.addEventListener('DOMContentLoaded', function() {\r\n+    displayLoggedInUserFromStorage();\r\n+    hideBannerIfLoggedIn();\r\n+    setupLogout();\r\n+    handleUserIconClick();\r\n+});\r\n \r\n+\r\n             // Call on page load\r\n \r\n \r\n \r\n"
                },
                {
                    "date": 1756829789722,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -246,14 +246,14 @@\n                 }\r\n             }\r\n \r\n             // Call on page load\r\n-          document.addEventListener('DOMContentLoaded', function() {\r\n-    displayLoggedInUserFromStorage();\r\n-    hideBannerIfLoggedIn();\r\n-    setupLogout();\r\n-    handleUserIconClick();\r\n-});\r\n+            document.addEventListener('DOMContentLoaded', function () {\r\n+                displayLoggedInUserFromStorage();\r\n+                hideBannerIfLoggedIn();\r\n+                setupLogout();\r\n+                handleUserIconClick();\r\n+            });\r\n \r\n \r\n             // Call on page load\r\n \r\n@@ -273,20 +273,29 @@\n             }\r\n             // Call it when the DOM is ready\r\n \r\n \r\n-            function setupLogout() {\r\n-                const logOutBtn = document.getElementById('logOut');\r\n-                if (!logOutBtn) return;\r\n+      function setupLogout() {\r\n+    const logOutBtn = document.getElementById('logOut');\r\n+    if (!logOutBtn) return;\r\n \r\n-                logOutBtn.addEventListener('click', () => {\r\n-                    localStorage.removeItem('currentUser');\r\n-                    console.log('Current user has been logged out.');\r\n-                    // Optionally, you can redirect or hide UI here\r\n-                    // window.location.reload(); // refresh page\r\n-                });\r\n-            }\r\n+    logOutBtn.addEventListener('click', () => {\r\n+        // Remove current user from localStorage\r\n+        localStorage.removeItem('currentUser');\r\n+        console.log('Current user has been logged out.');\r\n \r\n+        // Hide login container if visible\r\n+        const loginContainer = document.querySelector('.login-container');\r\n+        if (loginContainer) {\r\n+            loginContainer.style.display = 'none';\r\n+        }\r\n+\r\n+        // Redirect to login page\r\n+        window.location.href = 'pages/login.html';\r\n+    });\r\n+}\r\n+\r\n+\r\n             // Call the setup function on DOMContentLoaded\r\n \r\n \r\n             function handleUserIconClick() {\r\n"
                },
                {
                    "date": 1756829930653,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -273,27 +273,27 @@\n             }\r\n             // Call it when the DOM is ready\r\n \r\n \r\n-      function setupLogout() {\r\n-    const logOutBtn = document.getElementById('logOut');\r\n-    if (!logOutBtn) return;\r\n+            function setupLogout() {\r\n+                const logOutBtn = document.getElementById('logOut');\r\n+                if (!logOutBtn) return;\r\n \r\n-    logOutBtn.addEventListener('click', () => {\r\n-        // Remove current user from localStorage\r\n-        localStorage.removeItem('currentUser');\r\n-        console.log('Current user has been logged out.');\r\n+                logOutBtn.addEventListener('click', () => {\r\n+                    // Remove current user from localStorage\r\n+                    localStorage.removeItem('currentUser');\r\n+                    console.log('Current user has been logged out.');\r\n \r\n-        // Hide login container if visible\r\n-        const loginContainer = document.querySelector('.login-container');\r\n-        if (loginContainer) {\r\n-            loginContainer.style.display = 'none';\r\n-        }\r\n+                    // Hide login container if visible\r\n+                    const loginContainer = document.querySelector('.login-container');\r\n+                    if (loginContainer) {\r\n+                        loginContainer.style.display = 'none';\r\n+                    }\r\n \r\n-        // Redirect to login page\r\n-        window.location.href = 'pages/login.html';\r\n-    });\r\n-}\r\n+                    // Redirect to login page\r\n+                    window.location.href = 'pages/login.html';\r\n+                });\r\n+            }\r\n \r\n \r\n             // Call the setup function on DOMContentLoaded\r\n \r\n@@ -403,33 +403,47 @@\n                     console.error(\"Error fetching book data:\", error);\r\n                 }\r\n             }\r\n \r\n-            function addToCart(button) {\r\n-                const bookItem = button.closest(\"li\");\r\n-                const title = bookItem.querySelector(\".bookTitle\").innerText.trim();\r\n-                const priceText = bookItem.querySelector(\".pricetag\").innerText.trim();\r\n-                const price = parseFloat(priceText.replace(\"$\", \"\"));\r\n-                const image = bookItem.querySelector(\".img-book img\")?.src || \"img/books/placeholder.jpg\";\r\n+        function addToCart(button) {\r\n+    const bookItem = button.closest(\"li\");\r\n+    const title = bookItem.querySelector(\".bookTitle\").innerText.trim();\r\n+    const priceText = bookItem.querySelector(\".pricetag\").innerText.trim();\r\n+    const price = parseFloat(priceText.replace(\"$\", \"\"));\r\n+    const image = bookItem.querySelector(\".img-book img\")?.src || \"img/books/placeholder.jpg\";\r\n \r\n-                // Get current user fullName\r\n-                const currentUserFullName = localStorage.getItem(\"currentUser\");\r\n-                if (!currentUserFullName) return alert(\"Please log in first.\");\r\n+    // Get current user email\r\n+    const currentUserEmail = localStorage.getItem(\"currentUser\");\r\n+    if (!currentUserEmail) return alert(\"Please log in first.\");\r\n \r\n-                // Get all users\r\n-                const users = JSON.parse(localStorage.getItem(\"users\")) || [];\r\n-                const userIndex = users.findIndex(u => u.fullName === currentUserFullName);\r\n-                if (userIndex === -1) return alert(\"User not found.\");\r\n+    // Get all users\r\n+    const users = JSON.parse(localStorage.getItem(\"users\")) || [];\r\n+    const userIndex = users.findIndex(u => u.email === currentUserEmail);\r\n+    if (userIndex === -1) return alert(\"User not found.\");\r\n \r\n-                const user = users[userIndex];\r\n+    const user = users[userIndex];\r\n \r\n-                // Check if book already in cart\r\n-                const existing = user.cart.find(item => item.title === title);\r\n-                if (existing) {\r\n-                    alert(\"This book is already in your cart!\");\r\n-                    return;\r\n-                }\r\n+    // Check if book already in cart\r\n+    const existing = user.cart.find(item => item.title === title);\r\n+    if (existing) {\r\n+        alert(\"This book is already in your cart!\");\r\n+        return;\r\n+    }\r\n \r\n+    // Add book to user's cart\r\n+    user.cart.push({ title, price, image });\r\n+\r\n+    // Update users in localStorage\r\n+    users[userIndex] = user;\r\n+    localStorage.setItem(\"users\", JSON.stringify(users));\r\n+\r\n+    // Show notification\r\n+    showCartNotification(title);\r\n+\r\n+    // Re-render cart\r\n+    renderCart();\r\n+}\r\n+\r\n                 // Add book to user's cart\r\n                 user.cart.push({ title, price, image });\r\n \r\n                 // Update users in localStorage\r\n"
                },
                {
                    "date": 1756829941557,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -403,9 +403,9 @@\n                     console.error(\"Error fetching book data:\", error);\r\n                 }\r\n             }\r\n \r\n-        function addToCart(button) {\r\n+function addToCart(button) {\r\n     const bookItem = button.closest(\"li\");\r\n     const title = bookItem.querySelector(\".bookTitle\").innerText.trim();\r\n     const priceText = bookItem.querySelector(\".pricetag\").innerText.trim();\r\n     const price = parseFloat(priceText.replace(\"$\", \"\"));\r\n@@ -442,23 +442,9 @@\n     // Re-render cart\r\n     renderCart();\r\n }\r\n \r\n-                // Add book to user's cart\r\n-                user.cart.push({ title, price, image });\r\n \r\n-                // Update users in localStorage\r\n-                users[userIndex] = user;\r\n-                localStorage.setItem(\"users\", JSON.stringify(users));\r\n-\r\n-                // Show notification\r\n-                showCartNotification(title);\r\n-\r\n-                // Re-render cart\r\n-                renderCart();\r\n-            }\r\n-\r\n-\r\n             // Function to show cart notification\r\n             function showCartNotification(title) {\r\n                 const notification = document.getElementById(\"cartNotification\");\r\n                 notification.innerText = `\"${title}\" added to cart!`;\r\n"
                },
                {
                    "date": 1756830029127,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -403,44 +403,37 @@\n                     console.error(\"Error fetching book data:\", error);\r\n                 }\r\n             }\r\n \r\n-function addToCart(button) {\r\n+   function addToCart(button) {\r\n     const bookItem = button.closest(\"li\");\r\n     const title = bookItem.querySelector(\".bookTitle\").innerText.trim();\r\n     const priceText = bookItem.querySelector(\".pricetag\").innerText.trim();\r\n     const price = parseFloat(priceText.replace(\"$\", \"\"));\r\n     const image = bookItem.querySelector(\".img-book img\")?.src || \"img/books/placeholder.jpg\";\r\n \r\n     // Get current user email\r\n-    const currentUserEmail = localStorage.getItem(\"currentUser\");\r\n+    const currentUserEmail = JSON.parse(localStorage.getItem(\"currentUser\"))?.email;\r\n     if (!currentUserEmail) return alert(\"Please log in first.\");\r\n \r\n-    // Get all users\r\n     const users = JSON.parse(localStorage.getItem(\"users\")) || [];\r\n     const userIndex = users.findIndex(u => u.email === currentUserEmail);\r\n     if (userIndex === -1) return alert(\"User not found.\");\r\n \r\n     const user = users[userIndex];\r\n \r\n     // Check if book already in cart\r\n-    const existing = user.cart.find(item => item.title === title);\r\n-    if (existing) {\r\n+    if (user.cart.find(item => item.title === title)) {\r\n         alert(\"This book is already in your cart!\");\r\n         return;\r\n     }\r\n \r\n     // Add book to user's cart\r\n     user.cart.push({ title, price, image });\r\n-\r\n-    // Update users in localStorage\r\n     users[userIndex] = user;\r\n     localStorage.setItem(\"users\", JSON.stringify(users));\r\n \r\n-    // Show notification\r\n     showCartNotification(title);\r\n-\r\n-    // Re-render cart\r\n     renderCart();\r\n }\r\n \r\n \r\n"
                },
                {
                    "date": 1756830050108,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -448,58 +448,47 @@\n                     notification.classList.remove(\"show\");\r\n                 }, 2000);\r\n             }\r\n \r\n-            async function renderCart() {\r\n-                const cartItemsContainer = document.querySelector(\".cart-items\");\r\n-                if (!cartItemsContainer) {\r\n-                    const div = document.createElement(\"div\");\r\n-                    div.className = \"cart-items\";\r\n-                    document.getElementById(\"cartSidebar\").insertBefore(div, document.querySelector(\".cart-footer\"));\r\n-                }\r\n+        async function renderCart() {\r\n+    const currentUserEmail = JSON.parse(localStorage.getItem(\"currentUser\"))?.email;\r\n+    const users = JSON.parse(localStorage.getItem(\"users\")) || [];\r\n+    const user = users.find(u => u.email === currentUserEmail);\r\n+    const cart = user?.cart || [];\r\n \r\n-                const currentUserFullName = localStorage.getItem(\"currentUser\");\r\n-                const users = JSON.parse(localStorage.getItem(\"users\")) || [];\r\n-                const user = users.find(u => u.fullName === currentUserFullName);\r\n-                const cart = user?.cart || [];\r\n+    const cartContainer = document.querySelector(\".cart-items\");\r\n+    cartContainer.innerHTML = \"\";\r\n+    let total = 0;\r\n \r\n-                const cartContainer = document.querySelector(\".cart-items\");\r\n-                cartContainer.innerHTML = \"\";\r\n+    try {\r\n+        const response = await fetch(\"all-books.json\");\r\n+        const booksData = await response.json();\r\n \r\n-                let total = 0;\r\n+        cart.forEach((item, index) => {\r\n+            total += item.price;\r\n+            const bookData = booksData.find(b => b.title === item.title);\r\n+            const image = bookData?.image || item.image;\r\n \r\n-                try {\r\n-                    const response = await fetch(\"all-books.json\");\r\n-                    const booksData = await response.json();\r\n-\r\n-                    cart.forEach((item, index) => {\r\n-                        total += item.price;\r\n-\r\n-                        const bookData = booksData.find(b => b.title === item.title);\r\n-                        const image = bookData?.image || item.image;\r\n-\r\n-                        const cartItem = document.createElement(\"div\");\r\n-                        cartItem.className = \"cart-item\";\r\n-                        cartItem.innerHTML = `\r\n+            const cartItem = document.createElement(\"div\");\r\n+            cartItem.className = \"cart-item\";\r\n+            cartItem.innerHTML = `\r\n                 <img src=\"${image}\" alt=\"Book\">\r\n                 <div class=\"cart-item-info\">\r\n                     <h4>${item.title}</h4>\r\n                     <p>$${item.price.toFixed(2)}</p>\r\n                     <button class=\"remove-btn\" onclick=\"removeFromCart(${index})\">Remove</button>\r\n                 </div>\r\n             `;\r\n-                        cartContainer.appendChild(cartItem);\r\n-                    });\r\n+            cartContainer.appendChild(cartItem);\r\n+        });\r\n \r\n-                    // Update total\r\n-                    document.querySelector(\".cart-total span:last-child\").innerText = `$${total.toFixed(2)}`;\r\n+        document.querySelector(\".cart-total span:last-child\").innerText = `$${total.toFixed(2)}`;\r\n+    } catch (err) {\r\n+        console.error(\"Error fetching all-books.json:\", err);\r\n+    }\r\n+}\r\n \r\n-                } catch (err) {\r\n-                    console.error(\"Error fetching all-books.json:\", err);\r\n-                }\r\n-            }\r\n \r\n-\r\n             function removeFromCart(index) {\r\n                 const currentUserFullName = localStorage.getItem(\"currentUser\");\r\n                 const users = JSON.parse(localStorage.getItem(\"users\")) || [];\r\n                 const userIndex = users.findIndex(u => u.fullName === currentUserFullName);\r\n"
                },
                {
                    "date": 1756830100863,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -403,39 +403,39 @@\n                     console.error(\"Error fetching book data:\", error);\r\n                 }\r\n             }\r\n \r\n-   function addToCart(button) {\r\n-    const bookItem = button.closest(\"li\");\r\n-    const title = bookItem.querySelector(\".bookTitle\").innerText.trim();\r\n-    const priceText = bookItem.querySelector(\".pricetag\").innerText.trim();\r\n-    const price = parseFloat(priceText.replace(\"$\", \"\"));\r\n-    const image = bookItem.querySelector(\".img-book img\")?.src || \"img/books/placeholder.jpg\";\r\n+            function addToCart(button) {\r\n+                const bookItem = button.closest(\"li\");\r\n+                const title = bookItem.querySelector(\".bookTitle\").innerText.trim();\r\n+                const priceText = bookItem.querySelector(\".pricetag\").innerText.trim();\r\n+                const price = parseFloat(priceText.replace(\"$\", \"\"));\r\n+                const image = bookItem.querySelector(\".img-book img\")?.src || \"img/books/placeholder.jpg\";\r\n \r\n-    // Get current user email\r\n-    const currentUserEmail = JSON.parse(localStorage.getItem(\"currentUser\"))?.email;\r\n-    if (!currentUserEmail) return alert(\"Please log in first.\");\r\n+                // Get current user email\r\n+                const currentUserEmail = JSON.parse(localStorage.getItem(\"currentUser\"))?.email;\r\n+                if (!currentUserEmail) return alert(\"Please log in first.\");\r\n \r\n-    const users = JSON.parse(localStorage.getItem(\"users\")) || [];\r\n-    const userIndex = users.findIndex(u => u.email === currentUserEmail);\r\n-    if (userIndex === -1) return alert(\"User not found.\");\r\n+                const users = JSON.parse(localStorage.getItem(\"users\")) || [];\r\n+                const userIndex = users.findIndex(u => u.email === currentUserEmail);\r\n+                if (userIndex === -1) return alert(\"User not found.\");\r\n \r\n-    const user = users[userIndex];\r\n+                const user = users[userIndex];\r\n \r\n-    // Check if book already in cart\r\n-    if (user.cart.find(item => item.title === title)) {\r\n-        alert(\"This book is already in your cart!\");\r\n-        return;\r\n-    }\r\n+                // Check if book already in cart\r\n+                if (user.cart.find(item => item.title === title)) {\r\n+                    alert(\"This book is already in your cart!\");\r\n+                    return;\r\n+                }\r\n \r\n-    // Add book to user's cart\r\n-    user.cart.push({ title, price, image });\r\n-    users[userIndex] = user;\r\n-    localStorage.setItem(\"users\", JSON.stringify(users));\r\n+                // Add book to user's cart\r\n+                user.cart.push({ title, price, image });\r\n+                users[userIndex] = user;\r\n+                localStorage.setItem(\"users\", JSON.stringify(users));\r\n \r\n-    showCartNotification(title);\r\n-    renderCart();\r\n-}\r\n+                showCartNotification(title);\r\n+                renderCart();\r\n+            }\r\n \r\n \r\n             // Function to show cart notification\r\n             function showCartNotification(title) {\r\n@@ -448,57 +448,57 @@\n                     notification.classList.remove(\"show\");\r\n                 }, 2000);\r\n             }\r\n \r\n-        async function renderCart() {\r\n-    const currentUserEmail = JSON.parse(localStorage.getItem(\"currentUser\"))?.email;\r\n-    const users = JSON.parse(localStorage.getItem(\"users\")) || [];\r\n-    const user = users.find(u => u.email === currentUserEmail);\r\n-    const cart = user?.cart || [];\r\n+            async function renderCart() {\r\n+                const currentUserEmail = JSON.parse(localStorage.getItem(\"currentUser\"))?.email;\r\n+                const users = JSON.parse(localStorage.getItem(\"users\")) || [];\r\n+                const user = users.find(u => u.email === currentUserEmail);\r\n+                const cart = user?.cart || [];\r\n \r\n-    const cartContainer = document.querySelector(\".cart-items\");\r\n-    cartContainer.innerHTML = \"\";\r\n-    let total = 0;\r\n+                const cartContainer = document.querySelector(\".cart-items\");\r\n+                cartContainer.innerHTML = \"\";\r\n+                let total = 0;\r\n \r\n-    try {\r\n-        const response = await fetch(\"all-books.json\");\r\n-        const booksData = await response.json();\r\n+                try {\r\n+                    const response = await fetch(\"all-books.json\");\r\n+                    const booksData = await response.json();\r\n \r\n-        cart.forEach((item, index) => {\r\n-            total += item.price;\r\n-            const bookData = booksData.find(b => b.title === item.title);\r\n-            const image = bookData?.image || item.image;\r\n+                    cart.forEach((item, index) => {\r\n+                        total += item.price;\r\n+                        const bookData = booksData.find(b => b.title === item.title);\r\n+                        const image = bookData?.image || item.image;\r\n \r\n-            const cartItem = document.createElement(\"div\");\r\n-            cartItem.className = \"cart-item\";\r\n-            cartItem.innerHTML = `\r\n+                        const cartItem = document.createElement(\"div\");\r\n+                        cartItem.className = \"cart-item\";\r\n+                        cartItem.innerHTML = `\r\n                 <img src=\"${image}\" alt=\"Book\">\r\n                 <div class=\"cart-item-info\">\r\n                     <h4>${item.title}</h4>\r\n                     <p>$${item.price.toFixed(2)}</p>\r\n                     <button class=\"remove-btn\" onclick=\"removeFromCart(${index})\">Remove</button>\r\n                 </div>\r\n             `;\r\n-            cartContainer.appendChild(cartItem);\r\n-        });\r\n+                        cartContainer.appendChild(cartItem);\r\n+                    });\r\n \r\n-        document.querySelector(\".cart-total span:last-child\").innerText = `$${total.toFixed(2)}`;\r\n-    } catch (err) {\r\n-        console.error(\"Error fetching all-books.json:\", err);\r\n-    }\r\n-}\r\n+                    document.querySelector(\".cart-total span:last-child\").innerText = `$${total.toFixed(2)}`;\r\n+                } catch (err) {\r\n+                    console.error(\"Error fetching all-books.json:\", err);\r\n+                }\r\n+            }\r\n \r\n \r\n-            function removeFromCart(index) {\r\n-                const currentUserFullName = localStorage.getItem(\"currentUser\");\r\n-                const users = JSON.parse(localStorage.getItem(\"users\")) || [];\r\n-                const userIndex = users.findIndex(u => u.fullName === currentUserFullName);\r\n-                if (userIndex === -1) return;\r\n+         function removeFromCart(index) {\r\n+    const currentUserEmail = JSON.parse(localStorage.getItem(\"currentUser\"))?.email;\r\n+    const users = JSON.parse(localStorage.getItem(\"users\")) || [];\r\n+    const userIndex = users.findIndex(u => u.email === currentUserEmail);\r\n+    if (userIndex === -1) return;\r\n \r\n-                users[userIndex].cart.splice(index, 1);\r\n-                localStorage.setItem(\"users\", JSON.stringify(users));\r\n-                renderCart();\r\n-            }\r\n+    users[userIndex].cart.splice(index, 1);\r\n+    localStorage.setItem(\"users\", JSON.stringify(users));\r\n+    renderCart();\r\n+}\r\n \r\n             // Initialize cart on page load\r\n             document.addEventListener(\"DOMContentLoaded\", () => {\r\n                 renderCart();\r\n"
                },
                {
                    "date": 1756830217086,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -448,58 +448,76 @@\n                     notification.classList.remove(\"show\");\r\n                 }, 2000);\r\n             }\r\n \r\n-            async function renderCart() {\r\n-                const currentUserEmail = JSON.parse(localStorage.getItem(\"currentUser\"))?.email;\r\n-                const users = JSON.parse(localStorage.getItem(\"users\")) || [];\r\n-                const user = users.find(u => u.email === currentUserEmail);\r\n-                const cart = user?.cart || [];\r\n+   async function renderCart() {\r\n+    const cartSidebar = document.getElementById(\"cartSidebar\");\r\n+    if (!cartSidebar) return;\r\n \r\n-                const cartContainer = document.querySelector(\".cart-items\");\r\n-                cartContainer.innerHTML = \"\";\r\n-                let total = 0;\r\n+    // Find or create the cart items container\r\n+    let cartContainer = cartSidebar.querySelector(\".cart-items\");\r\n+    if (!cartContainer) {\r\n+        cartContainer = document.createElement(\"div\");\r\n+        cartContainer.className = \"cart-items\";\r\n+        const cartFooter = cartSidebar.querySelector(\".cart-footer\");\r\n+        if (cartFooter) cartSidebar.insertBefore(cartContainer, cartFooter);\r\n+        else cartSidebar.appendChild(cartContainer);\r\n+    }\r\n \r\n-                try {\r\n-                    const response = await fetch(\"all-books.json\");\r\n-                    const booksData = await response.json();\r\n+    // Get current user email\r\n+    const currentUserEmail = JSON.parse(localStorage.getItem(\"currentUser\"))?.email;\r\n+    if (!currentUserEmail) return; // No user logged in\r\n \r\n-                    cart.forEach((item, index) => {\r\n-                        total += item.price;\r\n-                        const bookData = booksData.find(b => b.title === item.title);\r\n-                        const image = bookData?.image || item.image;\r\n+    const users = JSON.parse(localStorage.getItem(\"users\")) || [];\r\n+    const user = users.find(u => u.email === currentUserEmail);\r\n+    const cart = user?.cart || [];\r\n \r\n-                        const cartItem = document.createElement(\"div\");\r\n-                        cartItem.className = \"cart-item\";\r\n-                        cartItem.innerHTML = `\r\n+    cartContainer.innerHTML = \"\";\r\n+    let total = 0;\r\n+\r\n+    try {\r\n+        const response = await fetch(\"all-books.json\");\r\n+        const booksData = await response.json();\r\n+\r\n+        cart.forEach((item, index) => {\r\n+            total += item.price;\r\n+            const bookData = booksData.find(b => b.title === item.title);\r\n+            const image = bookData?.image || item.image;\r\n+\r\n+            const cartItem = document.createElement(\"div\");\r\n+            cartItem.className = \"cart-item\";\r\n+            cartItem.innerHTML = `\r\n                 <img src=\"${image}\" alt=\"Book\">\r\n                 <div class=\"cart-item-info\">\r\n                     <h4>${item.title}</h4>\r\n                     <p>$${item.price.toFixed(2)}</p>\r\n                     <button class=\"remove-btn\" onclick=\"removeFromCart(${index})\">Remove</button>\r\n                 </div>\r\n             `;\r\n-                        cartContainer.appendChild(cartItem);\r\n-                    });\r\n+            cartContainer.appendChild(cartItem);\r\n+        });\r\n \r\n-                    document.querySelector(\".cart-total span:last-child\").innerText = `$${total.toFixed(2)}`;\r\n-                } catch (err) {\r\n-                    console.error(\"Error fetching all-books.json:\", err);\r\n-                }\r\n-            }\r\n+        const totalEl = cartSidebar.querySelector(\".cart-total span:last-child\");\r\n+        if (totalEl) totalEl.innerText = `$${total.toFixed(2)}`;\r\n \r\n+    } catch (err) {\r\n+        console.error(\"Error fetching all-books.json:\", err);\r\n+    }\r\n+}\r\n \r\n-         function removeFromCart(index) {\r\n-    const currentUserEmail = JSON.parse(localStorage.getItem(\"currentUser\"))?.email;\r\n-    const users = JSON.parse(localStorage.getItem(\"users\")) || [];\r\n-    const userIndex = users.findIndex(u => u.email === currentUserEmail);\r\n-    if (userIndex === -1) return;\r\n \r\n-    users[userIndex].cart.splice(index, 1);\r\n-    localStorage.setItem(\"users\", JSON.stringify(users));\r\n-    renderCart();\r\n-}\r\n \r\n+            function removeFromCart(index) {\r\n+                const currentUserEmail = JSON.parse(localStorage.getItem(\"currentUser\"))?.email;\r\n+                const users = JSON.parse(localStorage.getItem(\"users\")) || [];\r\n+                const userIndex = users.findIndex(u => u.email === currentUserEmail);\r\n+                if (userIndex === -1) return;\r\n+\r\n+                users[userIndex].cart.splice(index, 1);\r\n+                localStorage.setItem(\"users\", JSON.stringify(users));\r\n+                renderCart();\r\n+            }\r\n+\r\n             // Initialize cart on page load\r\n             document.addEventListener(\"DOMContentLoaded\", () => {\r\n                 renderCart();\r\n             });\r\n"
                },
                {
                    "date": 1756830252723,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -209,9 +209,9 @@\n         <script>\r\n             // Clear old cart\r\n             // localStorage.removeItem('currentUser');\r\n \r\n-            const currentUser = localStorage.getItem('currentUser');\r\n+            const currentUser = localStorage.getItem('user');\r\n             console.log('Current User:', currentUser);\r\n \r\n \r\n             function displayLoggedInUserFromStorage() {\r\n@@ -448,62 +448,62 @@\n                     notification.classList.remove(\"show\");\r\n                 }, 2000);\r\n             }\r\n \r\n-   async function renderCart() {\r\n-    const cartSidebar = document.getElementById(\"cartSidebar\");\r\n-    if (!cartSidebar) return;\r\n+            async function renderCart() {\r\n+                const cartSidebar = document.getElementById(\"cartSidebar\");\r\n+                if (!cartSidebar) return;\r\n \r\n-    // Find or create the cart items container\r\n-    let cartContainer = cartSidebar.querySelector(\".cart-items\");\r\n-    if (!cartContainer) {\r\n-        cartContainer = document.createElement(\"div\");\r\n-        cartContainer.className = \"cart-items\";\r\n-        const cartFooter = cartSidebar.querySelector(\".cart-footer\");\r\n-        if (cartFooter) cartSidebar.insertBefore(cartContainer, cartFooter);\r\n-        else cartSidebar.appendChild(cartContainer);\r\n-    }\r\n+                // Find or create the cart items container\r\n+                let cartContainer = cartSidebar.querySelector(\".cart-items\");\r\n+                if (!cartContainer) {\r\n+                    cartContainer = document.createElement(\"div\");\r\n+                    cartContainer.className = \"cart-items\";\r\n+                    const cartFooter = cartSidebar.querySelector(\".cart-footer\");\r\n+                    if (cartFooter) cartSidebar.insertBefore(cartContainer, cartFooter);\r\n+                    else cartSidebar.appendChild(cartContainer);\r\n+                }\r\n \r\n-    // Get current user email\r\n-    const currentUserEmail = JSON.parse(localStorage.getItem(\"currentUser\"))?.email;\r\n-    if (!currentUserEmail) return; // No user logged in\r\n+                // Get current user email\r\n+                const currentUserEmail = JSON.parse(localStorage.getItem(\"currentUser\"))?.email;\r\n+                if (!currentUserEmail) return; // No user logged in\r\n \r\n-    const users = JSON.parse(localStorage.getItem(\"users\")) || [];\r\n-    const user = users.find(u => u.email === currentUserEmail);\r\n-    const cart = user?.cart || [];\r\n+                const users = JSON.parse(localStorage.getItem(\"users\")) || [];\r\n+                const user = users.find(u => u.email === currentUserEmail);\r\n+                const cart = user?.cart || [];\r\n \r\n-    cartContainer.innerHTML = \"\";\r\n-    let total = 0;\r\n+                cartContainer.innerHTML = \"\";\r\n+                let total = 0;\r\n \r\n-    try {\r\n-        const response = await fetch(\"all-books.json\");\r\n-        const booksData = await response.json();\r\n+                try {\r\n+                    const response = await fetch(\"all-books.json\");\r\n+                    const booksData = await response.json();\r\n \r\n-        cart.forEach((item, index) => {\r\n-            total += item.price;\r\n-            const bookData = booksData.find(b => b.title === item.title);\r\n-            const image = bookData?.image || item.image;\r\n+                    cart.forEach((item, index) => {\r\n+                        total += item.price;\r\n+                        const bookData = booksData.find(b => b.title === item.title);\r\n+                        const image = bookData?.image || item.image;\r\n \r\n-            const cartItem = document.createElement(\"div\");\r\n-            cartItem.className = \"cart-item\";\r\n-            cartItem.innerHTML = `\r\n+                        const cartItem = document.createElement(\"div\");\r\n+                        cartItem.className = \"cart-item\";\r\n+                        cartItem.innerHTML = `\r\n                 <img src=\"${image}\" alt=\"Book\">\r\n                 <div class=\"cart-item-info\">\r\n                     <h4>${item.title}</h4>\r\n                     <p>$${item.price.toFixed(2)}</p>\r\n                     <button class=\"remove-btn\" onclick=\"removeFromCart(${index})\">Remove</button>\r\n                 </div>\r\n             `;\r\n-            cartContainer.appendChild(cartItem);\r\n-        });\r\n+                        cartContainer.appendChild(cartItem);\r\n+                    });\r\n \r\n-        const totalEl = cartSidebar.querySelector(\".cart-total span:last-child\");\r\n-        if (totalEl) totalEl.innerText = `$${total.toFixed(2)}`;\r\n+                    const totalEl = cartSidebar.querySelector(\".cart-total span:last-child\");\r\n+                    if (totalEl) totalEl.innerText = `$${total.toFixed(2)}`;\r\n \r\n-    } catch (err) {\r\n-        console.error(\"Error fetching all-books.json:\", err);\r\n-    }\r\n-}\r\n+                } catch (err) {\r\n+                    console.error(\"Error fetching all-books.json:\", err);\r\n+                }\r\n+            }\r\n \r\n \r\n \r\n             function removeFromCart(index) {\r\n"
                },
                {
                    "date": 1756833664724,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -209,9 +209,9 @@\n         <script>\r\n             // Clear old cart\r\n             // localStorage.removeItem('currentUser');\r\n \r\n-            const currentUser = localStorage.getItem('user');\r\n+            const currentUser = localStorage.getItem('currrentusers');\r\n             console.log('Current User:', currentUser);\r\n \r\n \r\n             function displayLoggedInUserFromStorage() {\r\n"
                },
                {
                    "date": 1756833818311,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -209,9 +209,9 @@\n         <script>\r\n             // Clear old cart\r\n             // localStorage.removeItem('currentUser');\r\n \r\n-            const currentUser = localStorage.getItem('currrentusers');\r\n+            const currentUser = localStorage.getItem('currentUser');\r\n             console.log('Current User:', currentUser);\r\n \r\n \r\n             function displayLoggedInUserFromStorage() {\r\n"
                },
                {
                    "date": 1756833985359,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -199,9 +199,9 @@\n \r\n             <div class=\"cart-footer\">\r\n                 <div class=\"cart-total\">\r\n                     <span>Total</span>\r\n-                    <span>$00</span>\r\n+                    <span>$00.</span>\r\n                 </div>\r\n                 <button class=\"checkout-btn\" onclick=\"location.href='cart.html'\">Checkout</button>\r\n             </div>\r\n         </div>\r\n"
                },
                {
                    "date": 1756838181256,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -34,9 +34,9 @@\n             <div class=\"browse-info\">\r\n                 <h1>Browse All Books</h1>\r\n                 <p>Discover our complete collection of C, C++, and Java programming books by Herbert Schildt</p>\r\n             </div>\r\n-            .bro\r\n+            .brow\r\n             <div class=\"browse-search\">\r\n                 <input type=\"text\" placeholder=\"Search Books\" id=\"\">\r\n                 <button><img src=\"img/search.svg\" alt=\"\"></button>\r\n                 <ul class=\"search-result\">\r\n"
                }
            ],
            "date": 1756819539312,
            "name": "Commit1-02-09- 21:25",
            "content": "<html lang=\"en\">\r\n\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <link rel=\"stylesheet\" href=\"style/browse-book.css\">\r\n    <link rel=\"stylesheet\" href=\"style/nav.css\">\r\n    <link rel=\"stylesheet\" href=\"style/modal/modal.css\">\r\n    <title>Document</title>\r\n</head>\r\n\r\n<body>\r\n    <div class=\"container\">\r\n\r\n        <div class=\"header\">\r\n            <div class=\"logo\">\r\n                <img src=\"img/logo-white.svg\" alt=\"\">\r\n            </div>\r\n            <div class=\"nav\">\r\n                <ul>\r\n                    <li><a href=\"index.html\">Home</a></li>\r\n                    <li><a href=\"\">About</a></li>\r\n                    <li onclick=\"toggleCart()\"><img src=\"img/cart.svg\" alt=\"\" style=\"height: 44px;\"></li>\r\n                    <li><a href=\"pages/login.html\"><img src=\"img/user-logo.svg\" alt=\"\" style=\"height: 44px;\"></a></li>\r\n                </ul>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"browse\">\r\n            <div class=\"browse-info\">\r\n                <h1>Browse All Books</h1>\r\n                <p>Discover our complete collection of C, C++, and Java programming books by Herbert Schildt</p>\r\n            </div>\r\n            <div class=\"browse-search\">\r\n                <input type=\"text\" placeholder=\"Search Books\" id=\"\">\r\n                <button><img src=\"img/search.svg\" alt=\"\"></button>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"line-1\">\r\n            <img src=\"img/b-hr-1.svg\" alt=\"\" style=\"width: 100%;\">\r\n        </div>\r\n\r\n\r\n        <div class=\"categories\">\r\n            <div class=\"c-head\">\r\n                <h1>Programming Languages by Herbert Schildt</h1>\r\n            </div>\r\n            <ul>\r\n                <li>\r\n                    <img src=\"img/code-icon.svg\" alt=\"\">\r\n                    <h3 id=\"c-title\">C Programming</h3>\r\n                    <p>The Complete C Reference</p>\r\n                </li>\r\n                <li>\r\n                    <img src=\"img/code-icon.svg\" alt=\"\">\r\n                    <h3 id=\"c-title\">C++</h3>\r\n                    <p>C++ Programming Guide</p>\r\n                </li>\r\n                <li>\r\n                    <img src=\"img/java-icon.svg\" alt=\"\">\r\n                    <h3 id=\"c-title\">Java</h3>\r\n                    <p>Complete Java Reference</p>\r\n                </li>\r\n            </ul>\r\n        </div>\r\n\r\n        <div class=\"featured-books\" id=\"featured-books\">\r\n            <h1>Featured Books</h1>\r\n            <ul class=\"books-card\" id=\"booksList\">\r\n                <!-- <li>\r\n                    <div class=\"img-book\">\r\n                        <button>View Quick</button>\r\n                    </div>\r\n                    <div class=\"book-info\">\r\n                        <h2>Java: The Complete Reference</h2>\r\n                        <p>The definitive guide to Java programming, covering Java 17 and all its features. </p>\r\n                        <div class=\"book-r-p\">\r\n                            <p>★★★★☆4.8</p>\r\n                            <h1>$59.99</h1>\r\n                        </div>\r\n                        <div class=\"btn-books\">\r\n                            <button><img src=\"img/preview-ico.svg\" alt=\"\"> Preview</button>\r\n                            <button id=\"addToCart\"><img src=\"img/cart.svg\" alt=\"\" style=\"height: 1.9em; margin-bottom: 0.3rem;\"> Add to\r\n                                Cart</button>\r\n                        </div>\r\n                    </div>\r\n                </li> -->\r\n            </ul>\r\n        </div>\r\n\r\n        <div class=\"banner-post\">\r\n            <div class=\"banner\" id=\"NoAcc\">\r\n                <h2>Dont have an account yet? Get registered and begin your journey.</h2>\r\n                <button onclick=\"location.href='pages/login.html'\">Click Here</button>\r\n            </div>\r\n        </div>\r\n\r\n\r\n        <div class=\"footer\">\r\n            <div class=\"footer-content\">\r\n                <!-- Left section -->\r\n                <div class=\"footer-left\">\r\n                    <h3>Herbert Schildt</h3>\r\n                    <p>Your trusted source for programming knowledge and IT learning resources.</p>\r\n\r\n                    <div class=\"social-icons\">\r\n                        <a href=\"#\"><img src=\"img/amazon.svg\" alt=\"Amazon\"></a>\r\n                        <a href=\"#\"><img src=\"img/goodreads.svg\" alt=\"Goodreads\"></a>\r\n                    </div>\r\n                </div>\r\n\r\n                <!-- Right section -->\r\n                <div class=\"footer-right\">\r\n                    <h3>Contact Info</h3>\r\n                    <ul>\r\n                        <li><span>📧</span> <a href=\"mailto:Herb@herbschildt.com\">Herb@herbschildt.com</a></li>\r\n                        <li><span>📞</span> +1 (555) 123-4567</li>\r\n                        <li><span>📍</span> McGraw-Hill Education</li>\r\n                    </ul>\r\n                </div>\r\n            </div>\r\n            <div class=\"cart-notification\" id=\"cartNotification\"></div>\r\n            <div class=\"modal-overlay\">\r\n                <div class=\"modal\">\r\n                    <div class=\"modal-content\">\r\n\r\n                        <!-- Book Cover -->\r\n                        <div class=\"book-image\">\r\n                            <img src=\"img/books/Java Complete.jpg\" alt=\"Java: The Complete Reference\">\r\n                        </div>\r\n\r\n                        <!-- Book Info -->\r\n                        <div class=\"book-details\">\r\n                            <h2>Java: The Complete Reference</h2>\r\n                            <p class=\"price\">$54.99</p>\r\n                            <p class=\"rating\">⭐ ⭐ ⭐ ⭐ ⭐ 4.7/5</p>\r\n\r\n                            <p class=\"description\">\r\n                                Comprehensive coverage of C++ programming language, including modern\r\n                                C++ features, templates, and STL.\r\n                            </p>\r\n\r\n                            <div class=\"meta\">\r\n                                <p><strong>Year:</strong> 2021</p>\r\n                                <p><strong>Pages:</strong> 1248</p>\r\n                                <p><strong>ISBN:</strong> 978-1260454468</p>\r\n                                <p><strong>Category:</strong> JAVA</p>\r\n                            </div>\r\n\r\n                            <!-- Action Buttons -->\r\n                            <div class=\"actions\">\r\n                                <button class=\"preview\">👁 Preview</button>\r\n                                <button class=\"add-cart\">🛒 Add to cart</button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n\r\n\r\n            <hr>\r\n            <div class=\"footer-bottom\">\r\n                <p>© 2024 Herbert Schildt. All rights reserved.</p>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- Sidebar -->\r\n        <div class=\"cart-sidebar\" id=\"cartSidebar\">\r\n            <div class=\"cart-header\">\r\n                Book Cart\r\n                <img src=\"img/close.svg\" alt=\"\" style=\"height: 20px;\" onclick=\"toggleCart()\">\r\n            </div>\r\n            <!-- \r\n            <div class=\"cart-items\">\r\n                <div class=\"cart-item\">\r\n                    <img src=\"https://via.placeholder.com/70x100\" alt=\"Book\">\r\n                    <div class=\"cart-item-info\">\r\n                        <h4>Java: The Complete Reference</h4>\r\n                        <p>$54.99</p>\r\n                        <button class=\"remove-btn\">Remove</button>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class=\"cart-item\">\r\n                    <img src=\"https://via.placeholder.com/70x100\" alt=\"Book\">\r\n                    <div class=\"cart-item-info\">\r\n                        <h4>Java: The Complete Reference</h4>\r\n                        <p>$54.99</p>\r\n                        <button class=\"remove-btn\">Remove</button>\r\n                    </div>\r\n                </div>\r\n            </div> -->\r\n\r\n            <div class=\"cart-footer\">\r\n                <div class=\"cart-total\">\r\n                    <span>Total</span>\r\n                    <span>$109.98</span>\r\n                </div>\r\n                <button class=\"checkout-btn\" onclick=\"location.href='cart.html'\">Checkout</button>\r\n            </div>\r\n        </div>\r\n\r\n        <script>\r\n            const categoryMap = {\r\n                \"c programming\": \"c\",\r\n                \"c++\": \"cpp\",\r\n                \"java\": \"java\"\r\n            };\r\n\r\n            const categoryItems = document.querySelectorAll(\".categories ul li\");\r\n\r\n            categoryItems.forEach(cat => {\r\n                cat.addEventListener(\"click\", () => {\r\n                    const catText = cat.querySelector(\"h3\").innerText.toLowerCase(); // e.g. \"c programming\"\r\n                    const category = categoryMap[catText];\r\n                    if (category) sortBooks(category);\r\n                });\r\n            });\r\n\r\n            function sortBooks(category) {\r\n                const booksList = document.getElementById(\"booksList\");\r\n                const books = Array.from(booksList.querySelectorAll(\"li\"));\r\n\r\n                books.sort((a, b) => {\r\n                    const aCat = a.getAttribute(\"data-category\");\r\n                    const bCat = b.getAttribute(\"data-category\");\r\n\r\n                    if (aCat === category && bCat !== category) return -1;\r\n                    if (aCat !== category && bCat === category) return 1;\r\n                    return 0;\r\n                });\r\n\r\n                books.forEach(book => booksList.appendChild(book));\r\n            }\r\n\r\n\r\n\r\n\r\n            function toggleCart() {\r\n                document.getElementById('cartSidebar').classList.toggle('open');\r\n            }\r\n\r\n            async function viewBook(button) {\r\n                const bookItem = button.closest(\"li\");\r\n                const bookTitle = bookItem.querySelector(\".bookTitle\").innerText.trim();\r\n\r\n                try {\r\n                    const response = await fetch(\"all-books.json\");\r\n                    const books = await response.json();\r\n\r\n                    const book = books.find(b => b.title.trim() === bookTitle);\r\n                    if (!book) return alert(\"Book not found!\");\r\n\r\n                    const modalOverlay = document.querySelector(\".modal-overlay\");\r\n                    const modal = modalOverlay.querySelector(\".modal\");\r\n\r\n                    modal.querySelector(\".book-image img\").src = book.image;\r\n                    modal.querySelector(\".book-image img\").alt = book.title;\r\n                    modal.querySelector(\".book-details h2\").innerText = book.title;\r\n                    modal.querySelector(\".book-details .price\").innerText = `$${book.price}`;\r\n                    modal.querySelector(\".book-details .rating\").innerText = `⭐ ⭐ ⭐ ⭐ ⭐ ${book.rating}/5`;\r\n                    modal.querySelector(\".book-details .description\").innerText = book.description;\r\n\r\n                    const meta = modal.querySelector(\".book-details .meta\");\r\n                    meta.innerHTML = `\r\n            <p><strong>Year:</strong> ${book.year}</p>\r\n            <p><strong>Pages:</strong> ${book.pages}</p>\r\n            <p><strong>ISBN:</strong> ${book.isbn}</p>\r\n            <p><strong>Category:</strong> ${book.category.toUpperCase()}</p>\r\n        `;\r\n\r\n                    modalOverlay.style.display = \"flex\";\r\n\r\n                } catch (error) {\r\n                    console.error(\"Error fetching book data:\", error);\r\n                }\r\n            }\r\n\r\n            function addToCart(button) {\r\n                const bookItem = button.closest(\"li\");\r\n                const title = bookItem.querySelector(\".bookTitle\").innerText.trim();\r\n                const priceText = bookItem.querySelector(\".pricetag\").innerText.trim();\r\n                const price = parseFloat(priceText.replace(\"$\", \"\"));\r\n                const image = bookItem.querySelector(\".img-book img\")?.src || \"img/books/placeholder.jpg\";\r\n\r\n                // Get current cart\r\n                let cart = JSON.parse(localStorage.getItem(\"bookCart\")) || [];\r\n\r\n                // Check if book already in cart\r\n                const existing = cart.find(item => item.title === title);\r\n                if (existing) {\r\n                    alert(\"This book is already in your cart!\");\r\n                    return;\r\n                }\r\n\r\n                // Add book to cart\r\n                cart.push({ title, price, image });\r\n                localStorage.setItem(\"bookCart\", JSON.stringify(cart));\r\n\r\n                // Show notification\r\n                showCartNotification(title);\r\n\r\n                // Re-render cart\r\n                renderCart();\r\n            }\r\n\r\n            // Function to show cart notification\r\n            function showCartNotification(title) {\r\n                const notification = document.getElementById(\"cartNotification\");\r\n                notification.innerText = `\"${title}\" added to cart!`;\r\n                notification.classList.add(\"show\");\r\n\r\n                // Hide after 2 seconds\r\n                setTimeout(() => {\r\n                    notification.classList.remove(\"show\");\r\n                }, 2000);\r\n            }\r\n\r\n            function renderCart() {\r\n                const cartItemsContainer = document.querySelector(\".cart-items\");\r\n                if (!cartItemsContainer) {\r\n                    // create cart-items div if not exist\r\n                    const div = document.createElement(\"div\");\r\n                    div.className = \"cart-items\";\r\n                    document.getElementById(\"cartSidebar\").insertBefore(div, document.querySelector(\".cart-footer\"));\r\n                }\r\n\r\n                const cart = JSON.parse(localStorage.getItem(\"bookCart\")) || [];\r\n                const cartContainer = document.querySelector(\".cart-items\");\r\n                cartContainer.innerHTML = \"\";\r\n\r\n                let total = 0;\r\n\r\n                cart.forEach((item, index) => {\r\n                    total += item.price;\r\n\r\n                    const cartItem = document.createElement(\"div\");\r\n                    cartItem.className = \"cart-item\";\r\n                    cartItem.innerHTML = `\r\n            <img src=\"${item.image}\" alt=\"Book\">\r\n            <div class=\"cart-item-info\">\r\n                <h4>${item.title}</h4>\r\n                <p>$${item.price.toFixed(2)}</p>\r\n                <button class=\"remove-btn\" onclick=\"removeFromCart(${index})\">Remove</button>\r\n            </div>\r\n        `;\r\n                    cartContainer.appendChild(cartItem);\r\n                });\r\n\r\n                // Update total\r\n                document.querySelector(\".cart-total span:last-child\").innerText = `$${total.toFixed(2)}`;\r\n            }\r\n\r\n            // Remove item from cart\r\n            function removeFromCart(index) {\r\n                let cart = JSON.parse(localStorage.getItem(\"bookCart\")) || [];\r\n                cart.splice(index, 1);\r\n                localStorage.setItem(\"bookCart\", JSON.stringify(cart));\r\n                renderCart();\r\n            }\r\n\r\n            // Initialize cart on page load\r\n            document.addEventListener(\"DOMContentLoaded\", () => {\r\n                renderCart();\r\n            });\r\n\r\n            // Optional: close modal by clicking overlay\r\n            document.querySelector(\".modal-overlay\").onclick = function (e) {\r\n                if (e.target === this) this.style.display = \"none\";\r\n            }\r\n\r\n            // Fetch books from JSON\r\n            fetch(\"all-books.json\")\r\n                .then(response => response.json())\r\n                .then(data => {\r\n                    const booksList = document.getElementById(\"booksList\");\r\n\r\n                    data.forEach(book => {\r\n                        const li = document.createElement(\"li\");\r\n\r\n                        li.innerHTML = `\r\n    <div class=\"img-book\" style=\"background-image: url('${book.image}');\">\r\n        <button class='view-btn' onclick=\"viewBook(this)\">View Quick</button>\r\n    </div>\r\n    <div class=\"book-info\">\r\n        <h2 class=\"bookTitle\">${book.title}</h2>\r\n        <p>${book.description}</p>\r\n        <div class=\"book-r-p\">\r\n            <p>★★★★☆ ${book.rating}</p>\r\n            <h1 class='pricetag'>$${book.price}</h1>\r\n        </div>\r\n        <div class=\"btn-books\">\r\n            <button><img src=\"img/preview-ico.svg\" alt=\"\"> Preview</button>\r\n            <button class='addToCartBtn' onclick=\"addToCart(this)\">\r\n                <img src=\"img/cart.svg\" alt=\"\" style=\"height: 1.9em; margin-bottom: 0.3rem;\"> \r\n                Add to Cart\r\n            </button>\r\n        </div>\r\n    </div>\r\n`;\r\n                        li.setAttribute(\"data-category\", book.category); // <-- important\r\n\r\n\r\n                        booksList.appendChild(li);\r\n                    });\r\n                })\r\n                .catch(error => console.error(\"Error loading books:\", error));\r\n\r\n\r\n            let cart = JSON.parse(localStorage.getItem(\"bookCart\")) || [];\r\n            console.log(\"Current bookCart:\", cart);\r\n\r\n        </script>\r\n\r\n    </div>\r\n</body>\r\n\r\n</html>"
        }
    ]
}