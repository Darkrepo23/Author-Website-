{
    "sourceFile": "js/forgot-password.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 10,
            "patches": [
                {
                    "date": 1756807275612,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1757049341670,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -63,8 +63,46 @@\n             window.location.href = 'otp-verification.html';\r\n         }\r\n     });\r\n \r\n+    function displayUserOptions() {\r\n+    const users = JSON.parse(localStorage.getItem(\"users\")) || [];\r\n+    const emailOTP = localStorage.getItem(\"emailOTP\");\r\n+\r\n+    // Find the user by email\r\n+    const user = users.find(u => u.email === emailOTP);\r\n+\r\n+    if (user) {\r\n+        // Mask email (first 2 chars, then *@...)\r\n+        const maskedEmail = user.email.replace(/(.{2})(.*)(@.*)/,\r\n+            (match, p1, p2, p3) => p1 + \"*\".repeat(p2.length) + p3\r\n+        );\r\n+\r\n+        // Mask phone (last 4 visible)\r\n+        const maskedPhone = \"••••\" + user.contactNum.slice(-4);\r\n+\r\n+        // Show in HTML\r\n+        document.getElementById(\"email\").textContent = maskedEmail;\r\n+        document.getElementById(\"contact\").textContent = maskedPhone;\r\n+\r\n+        // Generate 5-digit PIN\r\n+        const pin = Math.floor(10000 + Math.random() * 90000);\r\n+\r\n+        // Save PIN to localStorage (per user)\r\n+        localStorage.setItem(\"userPIN\", JSON.stringify({\r\n+            email: user.email,\r\n+            pin: pin\r\n+        }));\r\n+\r\n+        console.log(\"Generated PIN:\", pin); // debug only\r\n+    } else {\r\n+        console.warn(\"No user found matching emailOTP.\");\r\n+    }\r\n+}\r\n+\r\n+// Run this when page loads\r\n+displayUserOptions();\r\n+\r\n     // Initialize with email selected\r\n     selectOption('email');\r\n });\r\n \r\n"
                },
                {
                    "date": 1757049419236,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,29 +1,29 @@\n // Forgot Password functionality\r\n-document.addEventListener('DOMContentLoaded', function() {\r\n+document.addEventListener('DOMContentLoaded', function () {\r\n     const emailOption = document.getElementById('emailOption');\r\n     const phoneOption = document.getElementById('phoneOption');\r\n     const emailRadio = document.getElementById('emailRadio');\r\n     const phoneRadio = document.getElementById('phoneRadio');\r\n     const continueBtn = document.getElementById('continueBtn');\r\n \r\n     // Handle option selection\r\n-    emailOption.addEventListener('click', function() {\r\n+    emailOption.addEventListener('click', function () {\r\n         selectOption('email');\r\n     });\r\n \r\n-    phoneOption.addEventListener('click', function() {\r\n+    phoneOption.addEventListener('click', function () {\r\n         selectOption('phone');\r\n     });\r\n \r\n     // Handle radio button changes\r\n-    emailRadio.addEventListener('change', function() {\r\n+    emailRadio.addEventListener('change', function () {\r\n         if (this.checked) {\r\n             selectOption('email');\r\n         }\r\n     });\r\n \r\n-    phoneRadio.addEventListener('change', function() {\r\n+    phoneRadio.addEventListener('change', function () {\r\n         if (this.checked) {\r\n             selectOption('phone');\r\n         }\r\n     });\r\n@@ -32,30 +32,30 @@\n     function selectOption(type) {\r\n         // Remove selected class from all options\r\n         emailOption.classList.remove('selected');\r\n         phoneOption.classList.remove('selected');\r\n-        \r\n+\r\n         // Uncheck all radio buttons\r\n         emailRadio.checked = false;\r\n         phoneRadio.checked = false;\r\n-        \r\n+\r\n         // Select the chosen option\r\n         if (type === 'email') {\r\n             emailOption.classList.add('selected');\r\n             emailRadio.checked = true;\r\n         } else {\r\n             phoneOption.classList.add('selected');\r\n             phoneRadio.checked = true;\r\n         }\r\n-        \r\n+\r\n         // Enable continue button\r\n         continueBtn.disabled = false;\r\n     }\r\n \r\n     // Handle continue button click\r\n-    continueBtn.addEventListener('click', function() {\r\n+    continueBtn.addEventListener('click', function () {\r\n         const selectedType = emailRadio.checked ? 'email' : 'phone';\r\n-        \r\n+\r\n         if (selectedType === 'email') {\r\n             // Redirect to OTP verification page\r\n             window.location.href = 'otp-verification.html';\r\n         } else {\r\n@@ -64,45 +64,55 @@\n         }\r\n     });\r\n \r\n     function displayUserOptions() {\r\n-    const users = JSON.parse(localStorage.getItem(\"users\")) || [];\r\n-    const emailOTP = localStorage.getItem(\"emailOTP\");\r\n+        const users = JSON.parse(localStorage.getItem(\"users\")) || [];\r\n+        const emailOTP = localStorage.getItem(\"emailOTP\");\r\n \r\n-    // Find the user by email\r\n-    const user = users.find(u => u.email === emailOTP);\r\n+        // Find the user by email\r\n+        const user = users.find(u => u.email === emailOTP);\r\n \r\n-    if (user) {\r\n-        // Mask email (first 2 chars, then *@...)\r\n-        const maskedEmail = user.email.replace(/(.{2})(.*)(@.*)/,\r\n-            (match, p1, p2, p3) => p1 + \"*\".repeat(p2.length) + p3\r\n-        );\r\n+        if (user) {\r\n+            // Mask email (first 2 chars, then *@...)\r\n+            const maskedEmail = user.email.replace(/(.{2})(.*)(@.*)/,\r\n+                (match, p1, p2, p3) => p1 + \"*\".repeat(p2.length) + p3\r\n+            );\r\n \r\n-        // Mask phone (last 4 visible)\r\n-        const maskedPhone = \"••••\" + user.contactNum.slice(-4);\r\n+            // Mask phone (last 4 visible)\r\n+            const maskedPhone = \"••••\" + user.contactNum.slice(-4);\r\n \r\n-        // Show in HTML\r\n-        document.getElementById(\"email\").textContent = maskedEmail;\r\n-        document.getElementById(\"contact\").textContent = maskedPhone;\r\n+            // Show in HTML\r\n+            document.getElementById(\"email\").textContent = maskedEmail;\r\n+            document.getElementById(\"contact\").textContent = maskedPhone;\r\n \r\n-        // Generate 5-digit PIN\r\n-        const pin = Math.floor(10000 + Math.random() * 90000);\r\n+            // Generate 5-digit PIN\r\n+            const pin = Math.floor(10000 + Math.random() * 90000);\r\n \r\n-        // Save PIN to localStorage (per user)\r\n-        localStorage.setItem(\"userPIN\", JSON.stringify({\r\n-            email: user.email,\r\n-            pin: pin\r\n-        }));\r\n+            // Save PIN to localStorage (per user)\r\n+            localStorage.setItem(\"userPIN\", JSON.stringify({\r\n+                email: user.email,\r\n+                pin: pin\r\n+            }));\r\n \r\n-        console.log(\"Generated PIN:\", pin); // debug only\r\n+            console.log(\"Generated PIN:\", pin); // debug only\r\n+        } else {\r\n+            console.warn(\"No user found matching emailOTP.\");\r\n+        }\r\n+    }\r\n+\r\n+    // Run this when page loads\r\n+    displayUserOptions();\r\n+\r\n+    continueBtn.addEventListener('click', function() {\r\n+    const selectedType = emailRadio.checked ? 'email' : 'phone';\r\n+\r\n+    if (selectedType === 'email') {\r\n+        window.location.href = 'otp-verification.html';\r\n     } else {\r\n-        console.warn(\"No user found matching emailOTP.\");\r\n+        window.location.href = 'otp-verification.html';\r\n     }\r\n-}\r\n+});\r\n \r\n-// Run this when page loads\r\n-displayUserOptions();\r\n-\r\n     // Initialize with email selected\r\n     selectOption('email');\r\n });\r\n \r\n"
                },
                {
                    "date": 1757050050923,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -28,43 +28,50 @@\n         }\r\n     });\r\n \r\n     // Function to select an option\r\n-    function selectOption(type) {\r\n-        // Remove selected class from all options\r\n-        emailOption.classList.remove('selected');\r\n-        phoneOption.classList.remove('selected');\r\n+function selectOption(type) {\r\n+    // Remove selected class from all options\r\n+    emailOption.classList.remove('selected');\r\n+    phoneOption.classList.remove('selected');\r\n \r\n-        // Uncheck all radio buttons\r\n-        emailRadio.checked = false;\r\n-        phoneRadio.checked = false;\r\n+    // Uncheck all radio buttons\r\n+    emailRadio.checked = false;\r\n+    phoneRadio.checked = false;\r\n \r\n-        // Select the chosen option\r\n-        if (type === 'email') {\r\n-            emailOption.classList.add('selected');\r\n-            emailRadio.checked = true;\r\n-        } else {\r\n-            phoneOption.classList.add('selected');\r\n-            phoneRadio.checked = true;\r\n-        }\r\n+    // Select the chosen option\r\n+    if (type === 'email') {\r\n+        emailOption.classList.add('selected');\r\n+        emailRadio.checked = true;\r\n+        localStorage.setItem(\"otpType\", \"email\");  // ✅ Save choice\r\n+    } else {\r\n+        phoneOption.classList.add('selected');\r\n+        phoneRadio.checked = true;\r\n+        localStorage.setItem(\"otpType\", \"phone\");  // ✅ Save choice\r\n+    }\r\n \r\n-        // Enable continue button\r\n-        continueBtn.disabled = false;\r\n+    // Enable continue button\r\n+    continueBtn.disabled = false;\r\n+}\r\n+\r\n+// Handle continue button click\r\n+continueBtn.addEventListener('click', function () {\r\n+    const selectedType = emailRadio.checked ? 'email' : 'phone';\r\n+    localStorage.setItem(\"otpType\", selectedType); // ✅ Save again just in case\r\n+    window.location.href = 'otp-verification.html';\r\n+});\r\n+\r\n+// ✅ Restore selection if user comes back\r\n+document.addEventListener(\"DOMContentLoaded\", function () {\r\n+    const savedType = localStorage.getItem(\"otpType\");\r\n+    if (savedType === \"email\") {\r\n+        selectOption(\"email\");\r\n+    } else if (savedType === \"phone\") {\r\n+        selectOption(\"phone\");\r\n     }\r\n+});\r\n \r\n-    // Handle continue button click\r\n-    continueBtn.addEventListener('click', function () {\r\n-        const selectedType = emailRadio.checked ? 'email' : 'phone';\r\n \r\n-        if (selectedType === 'email') {\r\n-            // Redirect to OTP verification page\r\n-            window.location.href = 'otp-verification.html';\r\n-        } else {\r\n-            // Redirect to phone verification page\r\n-            window.location.href = 'otp-verification.html';\r\n-        }\r\n-    });\r\n-\r\n     function displayUserOptions() {\r\n         const users = JSON.parse(localStorage.getItem(\"users\")) || [];\r\n         const emailOTP = localStorage.getItem(\"emailOTP\");\r\n \r\n@@ -101,17 +108,17 @@\n \r\n     // Run this when page loads\r\n     displayUserOptions();\r\n \r\n-    continueBtn.addEventListener('click', function() {\r\n-    const selectedType = emailRadio.checked ? 'email' : 'phone';\r\n+    continueBtn.addEventListener('click', function () {\r\n+        const selectedType = emailRadio.checked ? 'email' : 'phone';\r\n \r\n-    if (selectedType === 'email') {\r\n-        window.location.href = 'otp-verification.html';\r\n-    } else {\r\n-        window.location.href = 'otp-verification.html';\r\n-    }\r\n-});\r\n+        if (selectedType === 'email') {\r\n+            window.location.href = 'otp-verification.html';\r\n+        } else {\r\n+            window.location.href = 'otp-verification.html';\r\n+        }\r\n+    });\r\n \r\n     // Initialize with email selected\r\n     selectOption('email');\r\n });\r\n"
                },
                {
                    "date": 1757050819151,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -28,50 +28,91 @@\n         }\r\n     });\r\n \r\n     // Function to select an option\r\n-function selectOption(type) {\r\n-    // Remove selected class from all options\r\n-    emailOption.classList.remove('selected');\r\n-    phoneOption.classList.remove('selected');\r\n+    function selectOption(type) {\r\n+        // Remove selected class from all options\r\n+        emailOption.classList.remove('selected');\r\n+        phoneOption.classList.remove('selected');\r\n \r\n-    // Uncheck all radio buttons\r\n-    emailRadio.checked = false;\r\n-    phoneRadio.checked = false;\r\n+        // Uncheck all radio buttons\r\n+        emailRadio.checked = false;\r\n+        phoneRadio.checked = false;\r\n \r\n-    // Select the chosen option\r\n-    if (type === 'email') {\r\n-        emailOption.classList.add('selected');\r\n-        emailRadio.checked = true;\r\n-        localStorage.setItem(\"otpType\", \"email\");  // ✅ Save choice\r\n-    } else {\r\n-        phoneOption.classList.add('selected');\r\n-        phoneRadio.checked = true;\r\n-        localStorage.setItem(\"otpType\", \"phone\");  // ✅ Save choice\r\n+        // Select the chosen option\r\n+        if (type === 'email') {\r\n+            emailOption.classList.add('selected');\r\n+            emailRadio.checked = true;\r\n+            localStorage.setItem(\"otpType\", \"email\");  // ✅ Save choice\r\n+        } else {\r\n+            phoneOption.classList.add('selected');\r\n+            phoneRadio.checked = true;\r\n+            localStorage.setItem(\"otpType\", \"phone\");  // ✅ Save choice\r\n+        }\r\n+\r\n+        // Enable continue button\r\n+        continueBtn.disabled = false;\r\n     }\r\n \r\n-    // Enable continue button\r\n-    continueBtn.disabled = false;\r\n+  // Generate 5-digit OTP\r\n+function generateOTP() {\r\n+    return Math.floor(10000 + Math.random() * 90000);\r\n }\r\n \r\n-// Handle continue button click\r\n continueBtn.addEventListener('click', function () {\r\n     const selectedType = emailRadio.checked ? 'email' : 'phone';\r\n-    localStorage.setItem(\"otpType\", selectedType); // ✅ Save again just in case\r\n-    window.location.href = 'otp-verification.html';\r\n-});\r\n+    localStorage.setItem(\"otpType\", selectedType); \r\n \r\n-// ✅ Restore selection if user comes back\r\n-document.addEventListener(\"DOMContentLoaded\", function () {\r\n-    const savedType = localStorage.getItem(\"otpType\");\r\n-    if (savedType === \"email\") {\r\n-        selectOption(\"email\");\r\n-    } else if (savedType === \"phone\") {\r\n-        selectOption(\"phone\");\r\n+    // ✅ If email option chosen → send via EmailJS\r\n+    if (selectedType === \"email\") {\r\n+        const emailOTP = localStorage.getItem(\"emailOTP\"); // saved earlier\r\n+        const users = JSON.parse(localStorage.getItem(\"users\")) || [];\r\n+        const user = users.find(u => u.email === emailOTP);\r\n+\r\n+        if (user) {\r\n+            // Generate OTP\r\n+            const otp = generateOTP();\r\n+\r\n+            // Save OTP for verification\r\n+            localStorage.setItem(\"userPIN\", JSON.stringify({\r\n+                email: user.email,\r\n+                pin: otp\r\n+            }));\r\n+\r\n+            // Send OTP using EmailJS\r\n+            emailjs.send(\"YOUR_SERVICE_ID\", \"YOUR_TEMPLATE_ID\", {\r\n+                to_email: user.email,\r\n+                to_name: user.fullName,\r\n+                otp_code: otp\r\n+            }).then(\r\n+                function(response) {\r\n+                    console.log(\"✅ OTP sent!\", response.status, response.text);\r\n+                    window.location.href = 'otp-verification.html';\r\n+                },\r\n+                function(error) {\r\n+                    console.error(\"❌ Failed to send OTP\", error);\r\n+                    alert(\"Error sending OTP. Please try again.\");\r\n+                }\r\n+            );\r\n+        }\r\n+    } else {\r\n+        // If phone → just redirect (you can integrate SMS later)\r\n+        window.location.href = 'otp-verification.html';\r\n     }\r\n });\r\n \r\n \r\n+    // ✅ Restore selection if user comes back\r\n+    document.addEventListener(\"DOMContentLoaded\", function () {\r\n+        const savedType = localStorage.getItem(\"otpType\");\r\n+        if (savedType === \"email\") {\r\n+            selectOption(\"email\");\r\n+        } else if (savedType === \"phone\") {\r\n+            selectOption(\"phone\");\r\n+        }\r\n+    });\r\n+\r\n+\r\n     function displayUserOptions() {\r\n         const users = JSON.parse(localStorage.getItem(\"users\")) || [];\r\n         const emailOTP = localStorage.getItem(\"emailOTP\");\r\n \r\n"
                },
                {
                    "date": 1757050839935,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -52,54 +52,54 @@\n         // Enable continue button\r\n         continueBtn.disabled = false;\r\n     }\r\n \r\n-  // Generate 5-digit OTP\r\n-function generateOTP() {\r\n-    return Math.floor(10000 + Math.random() * 90000);\r\n-}\r\n+    // Generate 5-digit OTP\r\n+    function generateOTP() {\r\n+        return Math.floor(10000 + Math.random() * 90000);\r\n+    }\r\n \r\n-continueBtn.addEventListener('click', function () {\r\n-    const selectedType = emailRadio.checked ? 'email' : 'phone';\r\n-    localStorage.setItem(\"otpType\", selectedType); \r\n+    continueBtn.addEventListener('click', function () {\r\n+        const selectedType = emailRadio.checked ? 'email' : 'phone';\r\n+        localStorage.setItem(\"otpType\", selectedType);\r\n \r\n-    // ✅ If email option chosen → send via EmailJS\r\n-    if (selectedType === \"email\") {\r\n-        const emailOTP = localStorage.getItem(\"emailOTP\"); // saved earlier\r\n-        const users = JSON.parse(localStorage.getItem(\"users\")) || [];\r\n-        const user = users.find(u => u.email === emailOTP);\r\n+        // ✅ If email option chosen → send via EmailJS\r\n+        if (selectedType === \"email\") {\r\n+            const emailOTP = localStorage.getItem(\"emailOTP\"); // saved earlier\r\n+            const users = JSON.parse(localStorage.getItem(\"users\")) || [];\r\n+            const user = users.find(u => u.email === emailOTP);\r\n \r\n-        if (user) {\r\n-            // Generate OTP\r\n-            const otp = generateOTP();\r\n+            if (user) {\r\n+                // Generate OTP\r\n+                const otp = generateOTP();\r\n \r\n-            // Save OTP for verification\r\n-            localStorage.setItem(\"userPIN\", JSON.stringify({\r\n-                email: user.email,\r\n-                pin: otp\r\n-            }));\r\n+                // Save OTP for verification\r\n+                localStorage.setItem(\"userPIN\", JSON.stringify({\r\n+                    email: user.email,\r\n+                    pin: otp\r\n+                }));\r\n \r\n-            // Send OTP using EmailJS\r\n-            emailjs.send(\"YOUR_SERVICE_ID\", \"YOUR_TEMPLATE_ID\", {\r\n-                to_email: user.email,\r\n-                to_name: user.fullName,\r\n-                otp_code: otp\r\n-            }).then(\r\n-                function(response) {\r\n-                    console.log(\"✅ OTP sent!\", response.status, response.text);\r\n-                    window.location.href = 'otp-verification.html';\r\n-                },\r\n-                function(error) {\r\n-                    console.error(\"❌ Failed to send OTP\", error);\r\n-                    alert(\"Error sending OTP. Please try again.\");\r\n-                }\r\n-            );\r\n+                // Send OTP using EmailJS\r\n+                emailjs.send(\"service_b816d9f\", \"YOUR_TEMPLATE_ID\", {\r\n+                    to_email: user.email,\r\n+                    to_name: user.fullName,\r\n+                    otp_code: otp\r\n+                }).then(\r\n+                    function (response) {\r\n+                        console.log(\"✅ OTP sent!\", response.status, response.text);\r\n+                        window.location.href = 'otp-verification.html';\r\n+                    },\r\n+                    function (error) {\r\n+                        console.error(\"❌ Failed to send OTP\", error);\r\n+                        alert(\"Error sending OTP. Please try again.\");\r\n+                    }\r\n+                );\r\n+            }\r\n+        } else {\r\n+            // If phone → just redirect (you can integrate SMS later)\r\n+            window.location.href = 'otp-verification.html';\r\n         }\r\n-    } else {\r\n-        // If phone → just redirect (you can integrate SMS later)\r\n-        window.location.href = 'otp-verification.html';\r\n-    }\r\n-});\r\n+    });\r\n \r\n \r\n     // ✅ Restore selection if user comes back\r\n     document.addEventListener(\"DOMContentLoaded\", function () {\r\n"
                },
                {
                    "date": 1757050852695,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -78,9 +78,9 @@\n                     pin: otp\r\n                 }));\r\n \r\n                 // Send OTP using EmailJS\r\n-                emailjs.send(\"service_b816d9f\", \"YOUR_TEMPLATE_ID\", {\r\n+                emailjs.send(\"service_b816d9f\", \"OUR_TEMPLATE_YID\", {\r\n                     to_email: user.email,\r\n                     to_name: user.fullName,\r\n                     otp_code: otp\r\n                 }).then(\r\n"
                },
                {
                    "date": 1757051606050,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -52,8 +52,13 @@\n         // Enable continue button\r\n         continueBtn.disabled = false;\r\n     }\r\n \r\n+     (function () {\r\n+            // Initialize EmailJS with your Public Key\r\n+            emailjs.init(\"-xbRzNSapSs8iD-WK\");\r\n+        })();\r\n+\r\n     // Generate 5-digit OTP\r\n     function generateOTP() {\r\n         return Math.floor(10000 + Math.random() * 90000);\r\n     }\r\n@@ -78,9 +83,9 @@\n                     pin: otp\r\n                 }));\r\n \r\n                 // Send OTP using EmailJS\r\n-                emailjs.send(\"service_b816d9f\", \"OUR_TEMPLATE_YID\", {\r\n+                emailjs.send(\"service_b816d9f\", \"template_5i01it9\", {\r\n                     to_email: user.email,\r\n                     to_name: user.fullName,\r\n                     otp_code: otp\r\n                 }).then(\r\n"
                },
                {
                    "date": 1757052195963,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -52,61 +52,10 @@\n         // Enable continue button\r\n         continueBtn.disabled = false;\r\n     }\r\n \r\n-     (function () {\r\n-            // Initialize EmailJS with your Public Key\r\n-            emailjs.init(\"-xbRzNSapSs8iD-WK\");\r\n-        })();\r\n+   \r\n \r\n-    // Generate 5-digit OTP\r\n-    function generateOTP() {\r\n-        return Math.floor(10000 + Math.random() * 90000);\r\n-    }\r\n-\r\n-    continueBtn.addEventListener('click', function () {\r\n-        const selectedType = emailRadio.checked ? 'email' : 'phone';\r\n-        localStorage.setItem(\"otpType\", selectedType);\r\n-\r\n-        // ✅ If email option chosen → send via EmailJS\r\n-        if (selectedType === \"email\") {\r\n-            const emailOTP = localStorage.getItem(\"emailOTP\"); // saved earlier\r\n-            const users = JSON.parse(localStorage.getItem(\"users\")) || [];\r\n-            const user = users.find(u => u.email === emailOTP);\r\n-\r\n-            if (user) {\r\n-                // Generate OTP\r\n-                const otp = generateOTP();\r\n-\r\n-                // Save OTP for verification\r\n-                localStorage.setItem(\"userPIN\", JSON.stringify({\r\n-                    email: user.email,\r\n-                    pin: otp\r\n-                }));\r\n-\r\n-                // Send OTP using EmailJS\r\n-                emailjs.send(\"service_b816d9f\", \"template_5i01it9\", {\r\n-                    to_email: user.email,\r\n-                    to_name: user.fullName,\r\n-                    otp_code: otp\r\n-                }).then(\r\n-                    function (response) {\r\n-                        console.log(\"✅ OTP sent!\", response.status, response.text);\r\n-                        window.location.href = 'otp-verification.html';\r\n-                    },\r\n-                    function (error) {\r\n-                        console.error(\"❌ Failed to send OTP\", error);\r\n-                        alert(\"Error sending OTP. Please try again.\");\r\n-                    }\r\n-                );\r\n-            }\r\n-        } else {\r\n-            // If phone → just redirect (you can integrate SMS later)\r\n-            window.location.href = 'otp-verification.html';\r\n-        }\r\n-    });\r\n-\r\n-\r\n     // ✅ Restore selection if user comes back\r\n     document.addEventListener(\"DOMContentLoaded\", function () {\r\n         const savedType = localStorage.getItem(\"otpType\");\r\n         if (savedType === \"email\") {\r\n"
                },
                {
                    "date": 1757053875544,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -103,9 +103,8 @@\n \r\n     // Run this when page loads\r\n     displayUserOptions();\r\n \r\n-\r\n     // Initialize with email selected\r\n     selectOption('email');\r\n });\r\n \r\n"
                },
                {
                    "date": 1758618623954,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -53,40 +53,40 @@\n             return email;\r\n         }\r\n     }\r\n \r\n-async function displayUserOptions(emailInput) {\r\n-    try {\r\n-        const res = await fetch(\"http://127.0.0.1:5000/get-user\", {\r\n-            method: \"POST\",\r\n-            headers: { \"Content-Type\": \"application/json\" },\r\n-            body: JSON.stringify({ email: emailInput })\r\n-        });\r\n+    async function displayUserOptions(emailInput) {\r\n+        try {\r\n+            const res = await fetch(\"http://127.0.0.1:5000/get-user\", {\r\n+                method: \"POST\",\r\n+                headers: { \"Content-Type\": \"application/json\" },\r\n+                body: JSON.stringify({ email: emailInput })\r\n+            });\r\n \r\n-        const result = await res.json();\r\n-        if (!result.success || !result.user) {\r\n-            console.warn(\"No user found for that email.\");\r\n-            return;\r\n-        }\r\n+            const result = await res.json();\r\n+            if (!result.success || !result.user) {\r\n+                console.warn(\"No user found for that email.\");\r\n+                return;\r\n+            }\r\n \r\n-        const user = result.user;\r\n+            const user = result.user;\r\n \r\n-        // ✅ Mask email\r\n-        const maskedEmail = user.Email.replace(\r\n-            /(.{2})(.*)(@.*)/,\r\n-            (m, p1, p2, p3) => p1 + \"*\".repeat(Math.max(0, p2.length)) + p3\r\n-        );\r\n-        document.getElementById(\"email\").textContent = maskedEmail;\r\n+            // ✅ Mask email\r\n+            const maskedEmail = user.Email.replace(\r\n+                /(.{2})(.*)(@.*)/,\r\n+                (m, p1, p2, p3) => p1 + \"*\".repeat(Math.max(0, p2.length)) + p3\r\n+            );\r\n+            document.getElementById(\"email\").textContent = maskedEmail;\r\n \r\n-        // ✅ Generate and save PIN\r\n-        const pin = Math.floor(10000 + Math.random() * 90000);\r\n-        localStorage.setItem(\"userPIN\", JSON.stringify({ email: user.Email, pin }));\r\n+            // ✅ Generate and save PIN\r\n+            const pin = Math.floor(10000 + Math.random() * 90000);\r\n+            localStorage.setItem(\"userPIN\", JSON.stringify({ email: user.Email, pin }));\r\n \r\n-        console.log(\"Generated PIN:\", pin);\r\n-    } catch (err) {\r\n-        console.error(\"Error fetching user:\", err);\r\n+            console.log(\"Generated PIN:\", pin);\r\n+        } catch (err) {\r\n+            console.error(\"Error fetching user:\", err);\r\n+        }\r\n     }\r\n-}\r\n \r\n     // ✅ Restore previous selection OR default to email\r\n     const savedType = localStorage.getItem(\"otpType\");\r\n     if (savedType) {\r\n"
                }
            ],
            "date": 1756807275612,
            "name": "Commit-0",
            "content": "// Forgot Password functionality\r\ndocument.addEventListener('DOMContentLoaded', function() {\r\n    const emailOption = document.getElementById('emailOption');\r\n    const phoneOption = document.getElementById('phoneOption');\r\n    const emailRadio = document.getElementById('emailRadio');\r\n    const phoneRadio = document.getElementById('phoneRadio');\r\n    const continueBtn = document.getElementById('continueBtn');\r\n\r\n    // Handle option selection\r\n    emailOption.addEventListener('click', function() {\r\n        selectOption('email');\r\n    });\r\n\r\n    phoneOption.addEventListener('click', function() {\r\n        selectOption('phone');\r\n    });\r\n\r\n    // Handle radio button changes\r\n    emailRadio.addEventListener('change', function() {\r\n        if (this.checked) {\r\n            selectOption('email');\r\n        }\r\n    });\r\n\r\n    phoneRadio.addEventListener('change', function() {\r\n        if (this.checked) {\r\n            selectOption('phone');\r\n        }\r\n    });\r\n\r\n    // Function to select an option\r\n    function selectOption(type) {\r\n        // Remove selected class from all options\r\n        emailOption.classList.remove('selected');\r\n        phoneOption.classList.remove('selected');\r\n        \r\n        // Uncheck all radio buttons\r\n        emailRadio.checked = false;\r\n        phoneRadio.checked = false;\r\n        \r\n        // Select the chosen option\r\n        if (type === 'email') {\r\n            emailOption.classList.add('selected');\r\n            emailRadio.checked = true;\r\n        } else {\r\n            phoneOption.classList.add('selected');\r\n            phoneRadio.checked = true;\r\n        }\r\n        \r\n        // Enable continue button\r\n        continueBtn.disabled = false;\r\n    }\r\n\r\n    // Handle continue button click\r\n    continueBtn.addEventListener('click', function() {\r\n        const selectedType = emailRadio.checked ? 'email' : 'phone';\r\n        \r\n        if (selectedType === 'email') {\r\n            // Redirect to OTP verification page\r\n            window.location.href = 'otp-verification.html';\r\n        } else {\r\n            // Redirect to phone verification page\r\n            window.location.href = 'otp-verification.html';\r\n        }\r\n    });\r\n\r\n    // Initialize with email selected\r\n    selectOption('email');\r\n});\r\n\r\n"
        }
    ]
}